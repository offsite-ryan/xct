<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <title id="title">BTS</title>
    <link rel="icon" type="image/x-icon" href="./favicon.png?v3=2">
    <link rel="apple-touch-icon" sizes="128x128" href="/apple-touch-icon.png?v=13">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="menu.css">
    <link rel="stylesheet" href="w3.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>


<body id="body" class="" style="padding:40px;">

    <!-- SIDE MENU -->
    <!-- <div class="w3-sidebar w3-bar-block w3-xxlarge w3-center"
        style="_padding-top:20px;width:90px;background-color:#272727;border-right:1px solid;_border-top:1px solid;top:0px;">
        <a href="#" class="w3-bar-item w3-button color-font"><i class="fa fa-bars"></i></a>
        <a href="#runtime" class="w3-bar-item w3-button"><i class="fa fa-th"></i></a>
        <a href="#batch" class="w3-bar-item w3-button"><i class="fa fa-table"></i></a>
        <a href="#configuration" class="w3-bar-item w3-button"><i class="fa fa-pencil-square-o"></i></a>
        <a href="#system" class="w3-bar-item w3-button"><i class="fa fa-cog"></i></a>
        <a _href="#" class="w3-bar-item _w3-button color-zero"><i class="fa fa-group"></i></a>
        <a href="#contextual-help" class="w3-bar-item w3-button"><i class="fa fa-question-circle"></i></a>
    </div> -->

    <!-- Sidebar -->
    <div class="w3-xxlarge"
        style="padding-right:75px;z-index: 9999999;position:fixed;top:0;width:100%;background-color:#272727;border:0px solid;padding-left:0px;">
        <div style="_width:95%;padding-top:20px;background-color: #272727;">
            <i id="menu" class="fa fa-bars" style="cursor:pointer;padding-right:25px;_color:#1599ac;"
                onclick="toggleSidebar(true)" aria-hidden="true" _onmouseenter="toggleSidebar(true)"
                _onmouseleave="toggleSidebar(false)"></i>
            <span class=""><!-- <i class="fa fa-battery-three-quarters" aria-hidden="true"></i> -->
                <span style="padding-left:10px;"> Test System - TS0937</span>
                <span class="" style="padding-right:30px;"><span
                        class="color-zero">&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</span><span id="view"
                        class="translate">Channels
                    </span></span>
            </span>

            <span class="w3-right" style="padding-top:5px;">
                <div class="w3-xlarge">
                    <span class="">
                        <i id="subitem-systems" class="fa fa-sitemap w3-xxlarge clickable color-current"
                            style="padding-right:30px;" aria-hidden="true"
                            onclick="window.location = './lab-management'"></i>
                        <i id="subitem-apps" class="fa fa-cube w3-xxlarge clickable"
                            style="display:none;padding-right:30px;color:white;" aria-hidden="true"
                            onclick="window.location.hash = '#apps'"></i>
                    </span>

                    <span class="">
                        <div class="w3-dropdown-hover  w3-xlarge" style="background-color:#272727;">
                            <i class="fa fa-user-circle-o w3-xxlarge color-font" style="padding-right:5px;"
                                aria-hidden="true"></i> &nbsp;
                            <span id="user" class="color-font" style="padding-right:24px;"></span>

                            <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                style="background-color:#272727;color:white;min-width:200px;">
                                <span class="w3-bar-item clickable" style="border-bottom:1px solid;"
                                    onclick="signout()"><i class="fa fa-sign-out"></i> Sign out</span>
                                <span class="w3-bar-item" style="">Language
                                    <li class="clickable" onclick="changeLanguage('en')">English</li>
                                    <li class="clickable" onclick="changeLanguage('de')">German</li>
                                    <li class="">Chinese</li>
                                </span>
                            </div>
                        </div>
                    </span>

                    <img class="logo2 w3-right" src="./assets/avl-logo.png" />
                </div>
            </span>
        </div>
    </div>
    <div id="mySidebar" class="noPrint w3-sidebar w3-bar-block _w3-border w3-center w3-xlarge"
        style="z-index:9999999;display:none;scrollbar-color:#5d5d5d #272727;width:200px;color:white;background-color: #272727;border:1px solid #5d5d5d;top:80px;font-size:28px;padding-bottom: 125px;">

        <div id="subitem-runtime" onclick="menuSelect('runtime')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="">
                <i class="fa fa-television" aria-hidden="true"></i>
                <br />
                <span class="translate">View</span></a>
        </div>

        <div id="subitem-batch" onclick="menuSelect('batch')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style=""><i class="fa fa-power-off" aria-hidden="true"></i><br /><span
                    class="translate">Control</span></a>
        </div>

        <div id="subitem-tests" onclick="menuSelect('tests')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-pencil-square-o" aria-hidden="true"></i><br /><span
                    class="translate">Tests</span></a>
        </div>

        <div id="subitem-batteries" onclick="menuSelect('batteries')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-battery-empty" aria-hidden="true"></i><br /><span
                    class="translate">Batteries</span></a>
        </div>

        <div id="subitem-chambers" onclick="menuSelect('chambers')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-snowflake-o" aria-hidden="true"></i><br /><span
                    class="translate">Chamber</span></a>
        </div>

        <div id="subitem-devices" onclick="menuSelect('devices')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-random" aria-hidden="true"></i><br /><span
                    class="translate">Devices</span></a>
        </div>

        <!-- <div id="subitem-configuration" onclick="menuSelect('configuration')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-pencil-square-o" aria-hidden="true"></i><br /><span
                    class="translate">Setup</span></a>
        </div> -->

        <!-- <div id="subitem-configuration" onclick="window.location.hash = '#configuration'" class="clickable"
            style="border:1px solid #5d5d5d;;padding:30px;">
            <a class="" style="" onclick=""><i class="fa fa-pencil-square-o" aria-hidden="true"></i><br /><span
                    class="translate">Setup</span></a>
        </div> -->

        <div id="subitem-data" onclick="menuSelect('data')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-database" aria-hidden="true"></i><br /><span
                    class="translate">Data</span></a>
        </div>

        <div id="subitem-system" onclick="menuSelect('system')" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-cog" aria-hidden="true"></i><br /><span
                    class="translate">System</span></a>
        </div>

        <div id="subitem-help" onclick="window.location.hash = '#help'" class="clickable"
            style="border:1px solid #5d5d5d;;padding:15px;">
            <a class="" style="" onclick=""><i class="fa fa-question-circle" aria-hidden="true"></i><br /><span
                    class="translate">Help</span></a>
        </div>
    </div>

    <!-- MAIN PAGE -->
    <div id="main-page">

        <!-- TOP -->
        <div style="padding:30px 30px 0px 30px;;">
            <div class="sticky">
                <div id="content" class="sticky" style="display:none;background-color:#272727;">

                    <!-- CHART TREEMAP -->
                    <!-- <div id="chart-heatmap" class="w3-right" style="width:100px;padding-right:5px;display:none;"></div> -->

                    <!-- <span class="header" style="padding-top:10px;display:none;">
                        <span class="color-font w3-xxlarge">
                            <span class="" style="_padding-left:65px;"><span id="view"
                                    class="translate">Channels</span></span>
                        </span>
                    </span> -->

                    <div id="overview-counts" class="w3-row w3-center _w3-right-align"
                        style="display:none;padding-top:5px;">
                        <div class="w3-col s12 w3-center" style="display:flex;justify-content:space-evenly;">
                            <!-- FILTER -->
                            <div id="_filter_paused" class="w3-padding w3-margin  w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;">
                                <!-- <span class="color-font">Filter <i class="fa fa-caret-down w3-xxlarge w3-right"></i></span> -->
                                <span class="w3-dropdown-hover color-font w3-text-white"
                                    style="width:100%;background-color: #272727;">
                                    <i id="" class="fa fa-caret-down w3-xxlarge w3-right" style="cursor:pointer;"
                                        aria-hidden="true"></i>
                                    <i class="fa fa-filter"></i>&nbsp;&nbsp;Filter
                                    <div class=" w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                        style="right:0;width:125px;min-width:250px;background-color:#2f2f2f;color:white;">
                                        <a id="menu-view-large" class="w3-bar-item w3-button" onclick="">
                                            Project A
                                        </a>
                                        <a id="menu-view-large" class="w3-bar-item w3-button" onclick="">
                                            Project B
                                        </a>
                                        <a id="menu-view-large" class="w3-bar-item w3-button" onclick="">
                                            Project C
                                        </a>
                                        <a id="menu-view-large" class="w3-bar-item w3-button" onclick="">
                                            <input placeholder="Search" />
                                        </a>
                                    </div>
                                </span>
                            </div>
                            <!-- STATE FILTERS -->
                            <div id="filter_all" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('all')">
                                <span class="color-font">All: <span id="count_all" class=""
                                        style="font-weight:bold;margin-left:10px;">48</span></span>
                            </div>
                            <div id="filter_on_test" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('on_test')">
                                <span class="color-font" style="">On Test: <span id="count_on_test" class=""
                                        style="font-weight:bold;margin-left:10px;">41
                                    </span>
                                </span>
                            </div>
                            <div id="filter_paused" class="w3-padding w3-margin  w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('paused')">
                                <span class="color-font">Paused: <span id="count_paused" class=""
                                        style="font-weight:bold;margin-left:10px;">7</span></span>
                            </div>
                            <div id="filter_empty" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('empty')">
                                <span class="color-font">Empty: <span id="count_empty" class=""
                                        style="font-weight:bold;margin-left:10px;">0</span></span>
                            </div>
                            <div id="filter_complete" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('complete')">
                                <span class="color-font">Complete: <span id="count_complete" class=""
                                        style="font-weight:bold;margin-left:10px;">9</span></span>
                            </div>
                            <div id="filter_error" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;border-radius:20px;"
                                onclick="filterRuntime('error')">
                                <span class="color-font">Errors: <span id="count_error" class=""
                                        style="font-weight:bold;margin-left:10px;">0</span></span>
                            </div>
                            <!-- VIEW PICKER -->
                            <div id="runtime-select-view" class="w3-padding w3-margin w3-col clickable w3-xlarge"
                                style="width:18%;_min-width:150px;border:1px solid #8a8a8a;">
                                <span class="w3-dropdown-hover color-font w3-text-white"
                                    style="width:100%;background-color: #272727;">
                                    <i id="" class="fa fa-caret-down w3-xxlarge w3-right" style="cursor:pointer;"
                                        aria-hidden="true"></i>
                                    View
                                    <div class=" w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                        style="right:0;width:125px;min-width:250px;background-color:#2f2f2f;color:white;">
                                        <a id="menu-view-large" class="w3-bar-item w3-button"
                                            onclick="selectCardType('large')"><i class="fa fa-area-chart"
                                                aria-hidden="true"></i> Large
                                            Card</a>
                                        <a id="menu-view-small" class="w3-bar-item w3-button"
                                            onclick="selectCardType('small')"><i class="fa fa-list-alt"
                                                aria-hidden="true"></i>
                                            Small
                                            Card</a>
                                        <a id="menu-view-table" class="w3-bar-item w3-button"
                                            onclick="selectCardType('table')"><i class="fa fa-table"
                                                aria-hidden="true"></i>
                                            Table</a>
                                        <a id="menu-view-timeline" class="w3-bar-item w3-button"
                                            onclick="selectCardType('timeline')"><i class="fa fa-clock-o"
                                                aria-hidden="true"></i>
                                            Timeline</a>
                                        <a id="menu-view-chamber" class="w3-bar-item w3-button"
                                            onclick="selectCardType('chamber')"><i class="fa fa-snowflake-o"
                                                aria-hidden="true"></i>
                                            Chamber</a>
                                    </div>
                                </span>
                            </div>
                        </div>

                        <!-- <span class="w3-col s10 w3-center w3-xlarge" style="display:none;justify-content: space-evenly;">
                        <div id="filter_on_test" onclick="filterRuntime('on_test')"
                            style="padding:5px 10px 5px 10px;width:32%;border-bottom:8px solid green;">On
                            Test&nbsp;<span id="count_on_test" class=""
                                style="font-weight:bold;margin-left:10px;">0</span></div>
                        <div id="filter_paused" onclick="filterRuntime('paused')"
                            style="padding:5px 10px 5px 10px;width:10%;border-bottom:8px solid yellow;">
                            Paused&nbsp;<span id="count_paused" class=""
                                style="font-weight:bold;margin-left:10px;">0</span></div>
                        <div id="filter_empty" onclick="filterRuntime('empty')"
                            style="padding:5px 10px 5px 10px;width:6%;border-bottom:8px solid rgb(78, 78, 78);">
                            Empty&nbsp;<span id="count_empty" class=""
                                style="font-weight:bold;margin-left:10px;">0</span></div>
                        <div id="filter_complete" onclick="filterRuntime('complete')"
                            style="padding:5px 10px 5px 10px;width:8%;border-bottom:8px solid #399dbd;">
                            Complete&nbsp;<span id="count_complete" class=""
                                style="font-weight:bold;margin-left:10px;">0</span></div>
                        <span id="filter_error" onclick="filterRuntime('error')"
                            style="padding:5px 10px 5px 10px;width:1%;border-bottom:8px solid red;">Error&nbsp;<span
                                id="count_error" class="" style="font-weight:bold;margin-left:10px;">0</span></span>
                    </span> -->

                        <!-- <div id="_runtime-select-view" class="w3-col s1 clickable w3-xlarge" style="display:none;">
                        <div class="w3-dropdown-hover w3-right" style="background-color:#1e1e1e;padding-top:13px;">
                            <div class=""
                                style="background-color:#272727;color:white;border:1px solid;padding:10px 20px 10px 20px;">
                                View&nbsp;<i id="menu" class="fa fa-caret-down w3-xlarge" style="cursor:pointer;"
                                    aria-hidden="true"></i>
                            </div>
                            <div class=" w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                style="right:0;width:125px;min-width:250px;background-color:#2f2f2f;color:white;">
                                <a id="menu-view-large" class="w3-bar-item w3-button"
                                    onclick="selectCardType('large')"><i class="fa fa-area-chart"
                                        aria-hidden="true"></i> Large
                                    Card</a>
                                <a id="menu-view-small" class="w3-bar-item w3-button"
                                    onclick="selectCardType('small')"><i class="fa fa-list-alt" aria-hidden="true"></i>
                                    Small
                                    Card</a>
                                <a id="menu-view-table" class="w3-bar-item w3-button"
                                    onclick="selectCardType('table')"><i class="fa fa-table" aria-hidden="true"></i>
                                    Table</a>
                                <a id="menu-view-timeline" class="w3-bar-item w3-button"
                                    onclick="selectCardType('timeline')"><i class="fa fa-table" aria-hidden="true"></i>
                                    Timeline</a>
                            </div>
                        </div>
                    </div> -->
                    </div>

                    <hr />
                </div>

                <!-- CARDS -->
                <div id="cards" class="w3-row" style="display:none;_margin-bottom:25px;_padding-bottom:50px;">

                    <!-- CHAMBERS -->
                    <div id="chamber-view" class="sticky-chamber"
                        style="display:flex;justify-content:left;padding-top:10px;padding-bottom:10px;border-bottom:1px solid;background-color: #272727;overflow-x:auto;">
                        <div w3-repeat="chambers"
                            class="card-chamber w3-padding _w3-margin w3-card _w3-col _s3 w3-xxlarge"
                            style="_display:none;">
                            <span class="" style="">
                                Chamber {{name}}
                                <span class="_w3-xlarge w3-right" style="padding-top:7px;font-size:23px;">
                                    <div class=""
                                        style="border-radius:10px;border:1px solid;background-color:#19c1daa8;">
                                        <span class="" style="padding:5px;margin:20px;">{{temp}}&nbsp;°C</span>
                                    </div>
                                </span>
                                <!-- <div class="w3-large color-zero" style="">
                            <span class="color-font">SAE 1437 - +/- 40 °C</span>
                        </div> -->
                                <div class="w3-large color-zero" style="">
                                    <span class="_color-font">SAE 1437 +/- 40 °C</span>
                                    <div class="w3-right w3-large color-zero" style="padding-right:5px;">{{temp}} °C
                                    </div>
                                </div>
                            </span>
                            <div id="chamber-profile-chart-{{name}}" style="padding-right:25px;"></div>

                            <span class=""
                                style="padding-left:75px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;">
                                <span class="w3-large" style="width:33%;padding-bottom:10px;">On&nbsp;Test: <span
                                        class="color-current">
                                        <span class="color-current" style="padding-left:0px;">5</span>
                                        <!-- <span
                                    style="width:50px;height:25px;display: inline-flex;background-color: #70ad47;justify-content: center;color: black;border-radius: 10px;">
                                    5
                                </span> -->
                                    </span></span>
                                <span class="w3-large" style="width:33%;padding-bottom:10px;">Paused:&nbsp;
                                    <span class="color-current" style="padding-left:0px;">3</span>
                                    <!-- <span
                                style="width:50px;height:25px;display: inline-flex;background-color: #ffc000;justify-content: center;color: black;border-radius: 10px;">
                                9
                            </span> -->
                                </span>
                                <span class="w3-large" style="width:33%;padding-bottom:10px;">Empty
                                    <span class="color-current" style="padding-left:0px;">2</span>
                                    <!-- <span
                                    style="width:50px;height:25px;display: inline-flex;background-color: #404040;justify-content: center;color: #c2c2c2;border-radius: 10px;">
                                    9
                                </span> -->
                                </span>
                                <span class="w3-large" style="width:40%;padding-bottom:10px;">Complete:
                                    <span class="color-current" style="padding-left:0px;">2</span>
                                    <!-- <span
                                    style="width:50px;height:25px;display: inline-flex;background-color: #d3d3d3;justify-content: center;color: black;border-radius: 10px;">
                                    9
                                </span> -->
                                </span>
                                <span class="w3-large color-zero" style="width:33%;padding-bottom:10px;">Error:
                                    <span class="color-zero" style="padding-left:0px;">0</span>
                                    <!-- <span
                                    style="width:50px;height:25px;display: inline-flex;background-color: #2b2b2b;justify-content: center;border-radius: 10px;">
                                    0
                                </span> -->
                                </span>
                            </span>
                        </div>
                    </div>

                    <!-- TABLE -->
                    <div id="table-view" class="w3-col s12 w3-large w3-hoverable" style="display:block;">
                        <table class="w3-table w3-bordered w3-xlarge">
                            <thead class="" style="">
                                <tr id="table-view-header" class="sticky color-font" style="">
                                    <!-- <th><i class="fa fa-square-o" aria-hidden="true"></i></th> -->
                                    <th _width="100">Channel</th>
                                    <th _width="250">Status</th>
                                    <th>Battery</th>
                                    <th>Test Procedure</th>
                                    <th>Chamber</th>
                                    <!-- <th>T (°C)</th> -->
                                    <th>V</th>
                                    <th>I (A)</th>
                                    <th>t (h)</th>
                                    <th># Cycles</th>
                                    <!-- <th></th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr w3-repeat="items" id="table-row-{{name}}" onclick="clickRow(this.rowIndex)"
                                    style="cursor:pointer;">
                                    <!-- <td><i class="fa fa-square-o" aria-hidden="true"></i></td> -->
                                    <td class="color-moniker" _style="width:10%;">
                                        <!-- <img src="{{icon}}" height="35" style="padding-right:10px;" /> -->
                                        <!-- <i class="fa {{state_icon}} {{state_color}} w3-xlarge"></i> -->

                                        <!-- {{state_icon}} -->
                                        <span style="padding-right:10px;">{{name}}</span>
                                    </td>
                                    <td>{{batch_state}}</td>
                                    <td>{{uut}}</td>
                                    <td>{{test}}</td>
                                    <td>{{chamber}}</td>
                                    <!-- <td>{{chamber_temp}}</td> -->
                                    <td class="color-voltage">{{v}}</td>
                                    <td class="color-current">{{i}}</td>
                                    <td class="color-time">{{st}}</td>
                                    <td>
                                        <div class="" style="display:flex;align-items:center;border-radius:30px;">
                                            <div style="padding-right:10px;min-width:40px;">{{cycles}}</div>
                                            <div id="{{name}}-progress-complete-table" class=""
                                                style="height:15px;background-color:rgb(106, 190, 223);">&nbsp;
                                            </div>
                                            <div id="{{name}}-progress-requested-table" class=""
                                                style="height:15px;background-color:#3d3d3d;">
                                            </div>
                                        </div>
                                    </td>
                                    <!-- <td><span class="color-current">{{cycles}}</span> / <span class="color-time">50</span></td> -->
                                    <!-- <td><i class="fa fa-pause color-font" style="cursor:pointer;" aria-hidden="true"></i></td> -->
                                </tr>
                            </tbody>
                        </table>
                        <br />
                    </div>

                    <!-- LARGE / SMALL CARDS -->
                    <div id="card-view" class="w3-col s12 w3-large"
                        style="display:flex;flex-direction:row;flex-wrap:wrap;justify-content: left;">
                        <div w3-repeat="items" class="w3-col s12 m3 l2"
                            style="display:block;max-width:295px;min-width:295px;padding:12px;">
                            <div id="{{name}}" class="card w3-padding w3-card" onclick="clickCard(this.id)">
                                <div class="" style="padding-bottom:10px;font-size:28px;">
                                    <!-- <img id="card-icon-{{name}}" src="{{icon}}" height="35"
                                        style="padding-right:10px;display:none;" /> -->
                                    <!-- <i class="fa {{state_icon}} {{state_color}} w3-xlarge"></i> -->
                                    <!-- {{icon}} -->
                                    <span id="card-name-{{name}}" class="color-moniker" style="">{{name}}</span>
                                    <span id="" class="color-moniker w3-right"
                                        style="margin-top:8px;font-size:20px !important;">{{uut}}</span>
                                </div>

                                <div class="_w3-center" style="padding-bottom:2px;">
                                    <span>{{batch_state}}
                                        <!-- <span>{{icon}} {{step}} -->
                                        <!-- <span><b>{{uut}}</b> -->
                                        <span class="w3-right" style="padding-top:3px;">
                                            <span class="">{{cycles}}</span>
                                            <span class=""> / </span>
                                            <span class="color-current">{{requested_cycles}}</span>
                                            <!-- <div class="" style="display:flex;align-items:center;border-radius:30px;">
                                    <div style="padding-right:20px;">{{cycles}}</div>
                                    <div id="{{name}}-progress-complete" class=""
                                        style="max-height:15px;background-color:rgb(106, 190, 223);">&nbsp;
                                    </div>
                                    <div id="{{name}}-progress-requested" class=""
                                        style="max-height:15px;background-color:#6abedf1a;">
                                        &nbsp;</div>
                                    <div style="padding-left:10px;">{{requested_cycles}}</div>
                                </div> -->
                                        </span>
                                        <br />
                                </div>

                                <span id="card-view-"
                                    style="min-height:30px;font-size:20px;margin-top:3px;display:flex;flex-direction: row;flex-wrap: nowrap;justify-content: space-between;">
                                    <span class="color-voltage">{{v}}</span>
                                    <span class="color-current">{{i}}</span>
                                    <span class="color-time">{{st}}</span>
                                </span>

                                <span class="w3-medium"
                                    style="display:flex;justify-content: space-between;display:none;">
                                    <!-- <span class="color-current">{{uut}}</span> -->
                                    <span style="_font-size:12px;margin-top:3px;">
                                        <span class="color-current">{{cycles}}</span>
                                        <span class="color-font"> / </span>
                                        <span class="color-time">50</span>
                                    </span>
                                </span>

                                <div id="card-chart-{{name}}" name="card-chart"
                                    style="margin-top:3px;padding-top:10px;">
                                </div>

                                <!-- <span class="w3-center">
                                    <i class="fa fa-play"></i>
                                    <i class="fa fa-pause "></i>
                                    <i class="fa fa-download w3-right"></i>
                                </span> -->
                            </div>
                        </div>
                    </div>


                    <!-- CHAMBER CARDS -->

                    <!-- <br />
                    <div w3-repeat="chambers" class="w3-xxlarge w3-row-padding w3-padding" style="">
                        <div class="w3-padding w3-center w3-col" style="width:500px;padding:20px;">
                            <div class="card w3-col s12" style="height:500px;padding:10px;">

                                <div class=""
                                    style="_display:none;">
                                    <span class="" style="">Chamber 106</span>
                                    <span class="w3-right color-current" style="">27 °C</span>

                                    <div id="chamber-profile-chart-{{name}}" style="padding-right:25px;"></div>

                                    <span class="w3-xlarge">
                                        <span
                                            style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                            <span style="width: 225px;">On&nbsp;Test </span>
                                            <span
                                                style="border:0.5px solid #6e6e6e;;background: linear-gradient(to right, #70ad47 37%, #1f1f1c 37%);width:100%;height:20px;">
                                                &nbsp;
                                            </span>
                                            <span style="width: 50px;padding-left:10px;">26</span>
                                        </span>

                                        <span
                                            style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                            <span style="width: 225px;">Paused </span>
                                            <div
                                                style="border:0.5px solid #6e6e6e;_margin:2.5px;_padding:2.5px;background: linear-gradient(to right, #ffc000 17%, #1f1f1c 17%);width:100%;height:20px;">
                                                &nbsp;
                                            </div>
                                            <span style="width:50px;padding-left:10px;">&nbsp;&nbsp;9</span>
                                        </span>

                                        <span
                                            style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                            <span style="width: 225px;">Empty </span>
                                            <div
                                                style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #404040 21%, #1f1f1c 21%);width:100%;height:20px;">
                                                &nbsp;
                                            </div>
                                            <span style="width: 50px;padding-left:10px;">11</span>
                                        </span>

                                        <span
                                            style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                            <span style="width: 225px;">Complete </span>
                                            <div
                                                style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #c2c2c2 17%, #1f1f1c 17%);width:100%;height:20px;">
                                                &nbsp;
                                            </div>
                                            <span style="width: 50px;padding-left:10px;">11</span>
                                        </span>

                                        <span
                                            style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                            <span style="width: 225px;">Error </span>
                                            <div
                                                style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, red 5%, #1f1f1c 5%);width:100%;height:20px;">
                                                &nbsp;
                                            </div>
                                            <span style="width: 50px;padding-left:10px;">&nbsp;&nbsp;1</span>
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="w3-padding w3-rest w3-center" style="width:auto;padding:20px;">
                            <div class="card w3-col s12 w3-xlarge" style="height:500px;">
                                <table class="w3-table w3-bordered" style="width:100%;">
                                    <tr>
                                        <th>Channel</th>
                                        <th>State</th>
                                        <th>Battery</th>
                                    </tr>
                                    <tr>
                                        <td>CH01</td>
                                        <td>On Test</td>
                                        <td>TXW23454-08</td>
                                    </tr>
                                    <tr>
                                        <td>CH01</td>
                                        <td>On Test</td>
                                        <td>TXW23454-08</td>
                                    </tr>
                                    <tr>
                                        <td>CH01</td>
                                        <td>On Test</td>
                                        <td>TXW23454-08</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div> -->


                    <div _id="chamber-view" class="w3-large"
                        style="display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;">

                        <!-- <div class="card w3-padding _w3-margin w3-card w3-col s3 w3-xxlarge" style="_display:none;">
                            <span class="" style="">Chamber 106</span>
                            <span class="w3-right color-current" style="">27 °C</span>

                            <div id="chamber-profile-chart" style="padding-right:25px;"></div>

                            <span class="w3-xlarge">
                                <span
                                    style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                    <span style="width: 225px;">On&nbsp;Test </span>
                                    <span
                                        style="border:0.5px solid #6e6e6e;;background: linear-gradient(to right, #70ad47 37%, #1f1f1c 37%);width:100%;height:20px;">
                                        &nbsp;
                                    </span>
                                    <span style="width: 50px;padding-left:10px;">26</span>
                                </span>

                                <span
                                    style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                    <span style="width: 225px;">Paused </span>
                                    <div
                                        style="border:0.5px solid #6e6e6e;_margin:2.5px;_padding:2.5px;background: linear-gradient(to right, #ffc000 17%, #1f1f1c 17%);width:100%;height:20px;">
                                        &nbsp;
                                    </div>
                                    <span style="width:50px;padding-left:10px;">&nbsp;&nbsp;9</span>
                                </span>

                                <span
                                    style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                    <span style="width: 225px;">Empty </span>
                                    <div
                                        style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #404040 21%, #1f1f1c 21%);width:100%;height:20px;">
                                        &nbsp;
                                    </div>
                                    <span style="width: 50px;padding-left:10px;">11</span>
                                </span>

                                <span
                                    style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                    <span style="width: 225px;">Complete </span>
                                    <div
                                        style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #c2c2c2 17%, #1f1f1c 17%);width:100%;height:20px;">
                                        &nbsp;
                                    </div>
                                    <span style="width: 50px;padding-left:10px;">11</span>
                                </span>

                                <span
                                    style="padding-left:30px;padding-right:30px;display:flex;align-items:center;width:100%">
                                    <span style="width: 225px;">Error </span>
                                    <div
                                        style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, red 5%, #1f1f1c 5%);width:100%;height:20px;">
                                        &nbsp;
                                    </div>
                                    <span style="width: 50px;padding-left:10px;">&nbsp;&nbsp;1</span>
                                </span>
                            </span>
                        </div> -->

                        <!-- <span>
                            <img src="./assets/chamber-view-table.png" height="725"
                                style="width:100%;padding-top:30px;"></img>
                        </span> -->

                        <!-- <span>
                            <img src="./assets/chamber-view-2.png" height="1075"
                                style="width:100%;padding-top:30px;"></img>
                        </span> -->

                        <!-- <span>
                            <img src="./assets/chamber-view-3.png" height="950"
                                style="width:100%;padding-top:30px;"></img>
                        </span> -->

                        <div w3-repeat="items" class="w3-col"
                            style="display:none;width:20%;_display:block;_max-width:295px;min-width:295px;padding:12px;_min-height:700px;">

                            <!-- <span style="padding-left:20px;padding-right:20px;display:inline-flex;align-items:center;width:100%">
                                <span style="width: 100px;">On&nbsp;Test </span>
                                <div
                                    style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #70ad47 32%, #1f1f1c 32%);width:100%;height:20px;">
                                    &nbsp;
                                </div>
                                <span style="width: 50px;padding-left:10px;">26</span>
                            </span>

                            <span style="padding-left:20px;padding-right:20px;display:inline-flex;align-items:center;width:100%">
                                <span style="width: 100px;">Paused </span>
                                <div
                                    style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #ffc000 17%, #1f1f1c 17%);width:100%;height:20px;">
                                    &nbsp;
                                </div>
                                <span style="width: 50px;padding-left:10px;">&nbsp;&nbsp;9</span>
                            </span>

                            <span style="padding-left:20px;padding-right:20px;display:inline-flex;align-items:center;width:100%">
                                <span style="width: 100px;">Empty </span>
                                <div
                                    style="border:0.5px solid #6e6e6e;margin:2.5px;padding:2.5px;background: linear-gradient(to right, #404040 17%, #1f1f1c 21%);width:100%;height:20px;">
                                    &nbsp;
                                </div>
                                <span style="width: 50px;padding-left:10px;">11</span>
                            </span> -->

                            <div id="{{chamber}}" class="card w3-padding w3-card" onclick="clickCard(this.id)">
                                <!-- <div class="" style="padding-bottom:10px;font-size:28px;">
                                    <span id="card-name-{{name}}" class="color-moniker" style="">{{name}}</span>
                                    <span id="" class="color-moniker w3-right"
                                        style="margin-top:8px;font-size:20px !important;">{{uut}}</span>
                                </div> -->

                                <span>
                                    <img src="./assets/chamber-1.png" height="350" style="width:100%;"></img>
                                </span>
                                <!-- <span id="card-view-"
                                    style="min-height:30px;font-size:20px;margin-top:3px;display:flex;flex-direction: row;flex-wrap: nowrap;justify-content: space-between;">
                                    <span class="color-voltage">{{v}}</span>
                                    <span class="color-current">{{i}}</span>
                                    <span class="color-time">{{st}}</span>
                                </span> -->

                                <span class="w3-medium"
                                    style="display:flex;justify-content: space-between;display:none;">
                                    <!-- <span class="color-current">{{uut}}</span> -->
                                    <span style="_font-size:12px;margin-top:3px;">
                                        <span class="color-current">{{cycles}}</span>
                                        <span class="color-font"> / </span>
                                        <span class="color-time">50</span>
                                    </span>
                                </span>

                                <div id="card-chart-{{name}}" name="card-chart"
                                    style="margin-top:3px;padding-top:10px;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TIMELINE -->
                    <div id="timeline-view" class="w3-col s12 w3-large" style="display:block;">
                        <div id="" class="w3-col s12 w3-large" _style="display:block;">
                            <table class="w3-table w3-bordered w3-xlarge w3-hoverable" style="top:350px;">
                                <thead>
                                    <tr id="timeline-view-header" class="sticky color-font">
                                        <!-- <th><i class="fa fa-square-o" aria-hidden="true"></i></th> -->
                                        <th width=150>Channel</th>
                                        <th width=250>State</th>
                                        <th id="day-minus-4" class="w3-center" style="border-left:0px solid;">
                                            18-Jul
                                        </th>
                                        <th id="day-minus-3" class="w3-center" style="border-left:1px solid;">
                                            19-Jul
                                        </th>
                                        <th id="day-minus-2" class="w3-center" style="border-left:1px solid;">
                                            20-Jul
                                        </th>
                                        <th id="day-minus-1" class="w3-center" style="border-left:1px solid;">
                                            21-Jul
                                        </th>
                                        <th id="day-minus-0" class="w3-center" style="border-left:1px solid;">
                                            22-Jul
                                        </th>
                                        <!-- <th class="w3-center">Timeline: <spam class="color-current">Last 5 days</spam></th> -->
                                    </tr>
                                </thead>

                                <!-- TIMELINE ROWS - REPEAT -->
                                <tbody>
                                    <tr id="timeline-row-{{name}}" w3-repeat="items" id="timeline-row-CH04"
                                        onclick="clickRow(this.rowIndex)">
                                        <td class="color-moniker">
                                            <!-- <i class="fa {{state_icon}} {{state_color}} w3-xlarge"></i> -->
                                            <!-- {{state_icon}} -->
                                            <span style="padding-right:10px;"> {{name}}</span>
                                        </td>
                                        <td>{{batch_state}}</td>
                                        <td colspan="5">
                                            <span class="w3-small" style="display:flex;margin-top:5px;">
                                                {{history}}
                                            </span>

                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- PAGER -->
                    <br />
                    <div style="padding-top:25px">&nbsp;</div>

                    <!-- DETAIL -->
                    <div id="detail" class="w3-padding _card w3-col s12"
                        style="display:none;cursor:default;background-color: #1e1e1e;_border:1px solid;">
                        <div class="w3-row w3-padding">

                            <!-- COLUMN 1 -->
                            <div class="w3-col s3">
                                <div class="color-moniker w3-xxlarge" style="padding-right:20px;padding-bottom:10px;">
                                    <!-- <img src="./assets/discharge.png" height="45" /> -->
                                    <span id="detail-name">CHANNEL </span>
                                    <!-- <span id="detail-uut" class="w3-right w3-xlarge" style="display:none;">UUT</span> -->
                                    <span class="w3-right w3-large" style="">
                                        <i id="detail-play" class="fa fa-play color-zero clickable w3-padding"></i>
                                        <i id="detail-pause" class="fa fa-pause color-zero clickable w3-padding"></i>
                                        <i id="detail-stop" class="fa fa-stop color-zero clickable w3-padding"></i>
                                    </span>
                                </div>
                                <span id="detail-batch-state">STATE </span></span>
                                <br />
                                <div style="padding-right: 25px;padding-top:10px;">
                                    <span class="color-font" style="font-size: 28px;margin-right:10px;">
                                        <span id="detail-v" class="color-voltage" style="margin-right:20px;">3.312V
                                        </span>
                                        <span id="detail-i" class="color-current" style="margin-right:20px;">-0.612A
                                        </span>
                                        <span id="detail-t" class="color-time">3.8h</span>
                                    </span>
                                </div>
                            </div>

                            <!-- COLUMN 2 -->
                            <!-- <div class="w3-col s2 w3-padding"
                                style="_margin-top:23px;display:flex;flex-direction:column;align-items:flex-end;">
                                <span class="w3-large"><span id="detail-uut" class="w3-xlarge"
                                        style="padding-left:30px;">UUT</span></span>
                            </div> -->

                            <!-- COLUMN 3 -->
                            <div class="w3-col s5" _style="display:flex;flex-direction:column;align-items:flex-start;">
                                <span class="" style="">
                                    <span class="color-zero w3-large "
                                        onclick="changeView('configuration-test-6',null)">
                                        <span style="padding-right:52px;">Procedure:</span>
                                        <span class="w3-text-white w3-xlarge" style="cursor: pointer;">
                                            <span id="test-6-detail-test">TEST</span> <span><i
                                                    class="fa fa-external-link color-current" style="padding-left:20px;"
                                                    aria-hidden="true"></i></span>
                                        </span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:10px;">Step Description:</span>
                                            <span id="detail-step" class="w3-text-white w3-xlarge" style="">Constant
                                                Current
                                                Charge</span>
                                        </span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:68px;">Run Time:</span>
                                            <span id="detail-run-time" class="w3-text-white w3-xlarge" style="">21h
                                                41m</span>
                                        </span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:47px;">Num Cycles:</span>
                                            <span class="w3-text-white w3-xlarge" style=""><span
                                                    id="detail-cycles">32</span> / <span
                                                    id="detail-requested">50</span></span>
                                        </span>
                                    </span>
                            </div>

                            <!-- COLUMN 4 -->
                            <div class="w3-col s4">
                                <span class="" style="">
                                    <span class="color-zero w3-large">
                                        <span style="padding-right:75px;">Battery:</span>
                                        <span class="w3-text-white w3-xlarge" style="cursor: pointer;"
                                            onclick="viewBattery(2)"><span id="detail-uut">XYZ</span><span><i
                                                    class="fa fa-external-link color-current" style="padding-left:20px;"
                                                    aria-hidden="true"></i></span>
                                        </span>
                                        <span class="w3-right w3-xlarge w3-text-white clickable w3-text-white"
                                            onclick="closeDetail()">
                                            <i class="fa fa-close" aria-hidden="true"></i>&nbsp;&nbsp;Close</span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:12px;">Rated Capacity:</span>
                                            <span id="detail-rated-capacity" class="w3-text-white w3-xlarge"
                                                style=""></span>
                                        </span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:32px;">Max Voltage:</span>
                                            <span id="detail-max-voltage" class="w3-text-white w3-xlarge"
                                                style=""></span>
                                        </span>
                                    </span>

                                    <br />
                                    <span class="" style="">
                                        <span class="color-zero w3-large">
                                            <span style="padding-right:34px;">Max Current:</span>
                                            <span id="detail-max-current" class="w3-text-white w3-xlarge"
                                                style=""></span>
                                        </span>
                                    </span>
                            </div>

                            <!-- <div class="w3-col s2" style="display:flex;flex-direction:column;align-items:flex-start;">
                    <span class="color-current w3-medium" style="margin-top: 12px;"><span class="color-font">Battery:
                        </span>2987-08 <span class="color-time">...</span></span>
                    <span class="color-current w3-medium"><span class="color-font">Rated Capacity: </span>2</span>
                    <span class="color-current w3-medium"><span class="color-font">Max Voltage: </span>3.8</span>
                    <span class="color-current w3-medium"><span class="color-font">Max Current:
                        </span>2.2</span></span>
                </div> -->

                            <!-- SCREEN GRAB & UI SWITCH -->
                            <!-- <div class="w3-col s1"
                    style="display:flex;flex-direction:row;align-items:flex-end;justify-content:flex-end;">
                    <span class="color-font" style="cursor:pointer;padding-top:5px;" onclick="closeDetail()"><i
                            class="fa fa-times w3-xlarge" aria-hidden="true"></i></span> -->

                            <!-- <span class="color-font" style="cursor:pointer;padding-top:5px;" onclick="copyDetail()"><i
                                class="fa fa-files-o w3-xlarge" aria-hidden="true"></i></span> -->

                            <!-- <div id="menu-detail" class="w3-dropdown-hover" style="background-color:#2f2f2f00;">
                            <div class="w3-xlarge" style="background-color:#2f2f2f00;border:0px solid;;">
                                <i id="menu" class="fa fa-bars color-font" style="cursor:pointer;"
                                    aria-hidden="true"></i>
                            </div>
                            <div class="card-menu-options w3-dropdown-content w3-bar-block w3-border w3-medium"
                                style="right:0;z-index:99999;">
                                <a class="card-menu-option-selected w3-bar-item w3-button"
                                    onclick="selectChartType('I')">Runtime</a>
                                <a class="card-menu-option-unselected w3-bar-item w3-button"
                                    onclick="selectChartType('V')">Parameters</a>
                                <a class="card-menu-option-unselected w3-bar-item w3-button"
                                    onclick="selectChartType('I')">Test Definition</a>
                                <a class="card-menu-option-unselected w3-bar-item w3-button"
                                    onclick="selectChartType('T')">Data Analysis</a>
                            </div>
                        </div> -->

                        </div>

                        <div class="w3-col s12">
                            <div class="w3-container" style="padding-top:30px;">
                                <!-- <hr />
                        <div class="w3-col s12 w3-center" _style="">
                            <span><i class="fa fa-play w3-xlarge color-zero" aria-hidden="true"
                                    style="padding:5px 25px 15px 25px;"></i></span>
                            <span><i class="fa fa-pause w3-xlarge color-font" aria-hidden="true"
                                    style="padding:5px 25px 15px 25px;"></i></i></span>
                            <span><i class="fa fa-eject w3-xlarge color-zero" aria-hidden="true"
                                    style="padding:5px 25px 15px 25px;"></i></i></span>
                        </div> -->

                                <!-- CALCULATED FIELDS -->
                                <div class="w3-padding"
                                    style="display:flex;flex-direction:row;justify-content:space-between;">
                                    <div class="w3-col s2 color-font w3-xlarge w3-padding"
                                        style="width:20%;border:2px solid rgb(138, 138, 138);">Dis Eng<span
                                            class="color-current" style="float:right;">1 Wh</span></div>
                                    <div class="w3-col s2 color-font w3-xlarge w3-padding"
                                        style="width:20%;border:2px solid rgb(138, 138, 138);">Dis Cap<span
                                            class="color-current" style="float:right;">82 Ah</span></div>
                                    <div class="w3-col s2 color-font w3-xlarge w3-padding"
                                        style="width:20%;border:2px solid rgb(138, 138, 138);">EE<span
                                            class="color-current" style="float:right;">82 %</span></div>
                                    <div class="w3-col s2 color-font w3-xlarge w3-padding"
                                        style="width:20%;border:2px solid rgb(138, 138, 138);">CE<span
                                            class="color-current" style="float:right;">99 %</span></div>
                                    <div class="w3-center w3-col s2 color-font w3-xlarge w3-padding"
                                        style="width:15%;border:2px solid rgb(138, 138, 138);"><i class="fa fa-clock-o"
                                            aria-hidden="true"></i> Recent <i class="fa fa-caret-down"
                                            aria-hidden="true"></i><span class="color-current"
                                            style="float:right;"></span>
                                    </div>
                                </div>

                                <!-- TOP CHART -->
                                <span _style="">
                                    <div class=""
                                        style="height:0px;float:right;padding-right:20px;position:relative;z-index:9999;_padding-top:20px;">
                                        <div id="menu-detail" class="w3-dropdown-hover"
                                            style="background-color:#2f2f2f00;">
                                            <div class="w3-xlarge"
                                                style="background-color:#272727;border:0px solid;margin-left:30px;">
                                                <i id="menu" class="fa fa-ellipsis-v color-font" style="cursor:pointer;"
                                                    aria-hidden="true"></i>
                                            </div>
                                            <div class="card-menu-options w3-dropdown-content w3-bar-block w3-border w3-medium"
                                                style="right:0">
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('V')">V</a>
                                                <a class=" w3-text-whitew3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('I')">I</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">T°</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">E</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">P</a>
                                            </div>
                                        </div>
                                    </div>
                                </span>
                                <div id="chart-detail-1" style="margin-top:3px;margin-bottom:20px;"></div>

                                <!-- BOTTOM CHART -->
                                <span _style="">
                                    <div class=""
                                        style="height:0px;float:right;padding-right:20px;position:relative;z-index:9999;">
                                        <div id="menu-detail" class="w3-dropdown-hover"
                                            style="background-color:#2f2f2f00;">
                                            <div class="w3-xlarge"
                                                style="background-color:#272727;border:0px solid;margin-left:30px;;">
                                                <i id="menu" class="fa fa-ellipsis-v color-font" style="cursor:pointer;"
                                                    aria-hidden="true"></i>
                                            </div>
                                            <div class="card-menu-options w3-dropdown-content w3-bar-block w3-border w3-medium"
                                                style="right:0">
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('V')">V</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('I')">I</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">T°</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">E</a>
                                                <a class="w3-bar-item w3-button w3-text-white"
                                                    onclick="selectChartType('T')">P</a>
                                            </div>
                                        </div>
                                    </div>
                                </span>
                                <div id="chart-detail-2" style="margin-top:3px;margin-bottom:20px;"></div>

                                <!-- ADDITIONAL CHANNELS -->
                                <div class="w3-container w3-padding _color-zero w3-text-white w3-large"
                                    style="display:flex;flex-direction:row;justify-content:space-around;">
                                    <div class="w3-card w3-padding w3-col s2" style="border:1px solid #cecece;">
                                        <span style="_margin:15px;">POUCH_TAB_POS</span><br />
                                        <span class="w3-right w3-xlarge color-current" style="_margin:15px;">27.31
                                            <span class="color-font">°C</span></span>
                                    </div>
                                    <div class="w3-card w3-padding w3-col s2" style="border:1px solid #cecece;">
                                        <span style="_margin:15px;">POUCH_TAB_NEG</span><br />
                                        <span class="w3-right w3-xlarge color-current" style="_margin:15px;">27.33
                                            <span class="color-font">°C</span></span>
                                    </div>
                                    <div class="w3-card w3-padding w3-col s2" style="border:1px solid #cecece;">
                                        <span style="_margin:15px;">POUCH_BOTTOM_LEFT</span><br />
                                        <span class="w3-right w3-xlarge color-current" style="_margin:15px;">27.32
                                            <span class="color-font">°C</span></span>
                                    </div>
                                    <div class="w3-card w3-padding w3-col s2" style="border:1px solid #cecece;">
                                        <span style="_margin:15px;">POUCH_BOTTOM_RIGHT</span><br />
                                        <span class="w3-right w3-xlarge color-current" style="_margin:15px;">27.35
                                            <span class="color-font">°C</span></span>
                                    </div>
                                    <div class="w3-card w3-padding w3-col s2" style="border:1px solid #cecece;">
                                        <span style="_margin:15px;">POUCH_CENTER</span><br />
                                        <span class="w3-right w3-xlarge color-current" style="_margin:15px;">27.28
                                            <span class="color-font">°C</span></span>
                                    </div>
                                </div>
                                &nbsp;<br />
                            </div>
                        </div>
                    </div>

                </div>

                <!-- BATCH OPERATIONS -->
                <div id="view-batch" class="" style="display:none;margin-left:0px;background-color: #1e1e1e;">
                    <div class="w3-container w3-padding w3-xlarge">
                        <div id="batch-view" class="w3-col s12 w3-large"
                            style="display:block;background-color:#1e1e1e;">
                            <!-- <div class="w3-xxlarge w3-center color-zero" style="background-color: #1e1e1e;">
                        <span class="w3-left color-font">Channels</span>
                        <i class="fa fa-eject w3-right" aria-hidden="true" style="margin:20px;"></i>
                        <i class="fa fa-pause w3-right" aria-hidden="true" style="margin:20px;"></i>
                        <i class="fa fa-play w3-right" aria-hidden="true" style="margin:20px;"></i>
                        <i class="fa fa-folder-o w3-right clickable color-current" aria-hidden="true"
                            style="margin:20px;"></i>
                    </div> -->
                            <div class="w3-large" style="padding-bottom:20px;">
                                <span class="w3-xlarge">Channel Configurations</span>
                                <span class="w3-right" style="padding-top:10px;">
                                    <i class="fa fa-upload w3-right color-zero" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"></i>
                                    <i class="fa fa-minus-circle w3-right color-zero" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"></i>
                                    <i class="fa fa-pause w3-right color-zero" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"></i>
                                    <i class="fa fa-play w3-right color-zero" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"></i>
                                    <i class="fa fa-folder-o clickable" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"
                                        onclick="document.getElementById('modal-batch-load').style.display='block'"></i>
                                    <i class="fa fa-pencil-square-o clickable" aria-hidden="true"
                                        style="margin:3px 20px 3px 20px;"
                                        onclick="document.getElementById('modal-batch-edit').style.display='block'"></i>
                                </span>
                            </div>
                            <table class="w3-table w3-bordered w3-xlarge w3-hoverable">
                                <thead>
                                    <tr class="sticky color-font">
                                        <!-- <th><i class="fa fa-square-o" aria-hidden="true"></i></th> -->
                                        <th width="75"><i class="fa fa-square-o color-current"
                                                id="batch-row-{{name}}-select-all" onclick="toggleBathSelected(this.id)"
                                                aria-hidden="true"></i></th>
                                        <th width="150">Channel</th>
                                        <th width="250">Status</th>
                                        <th class="">
                                            Serial Number
                                            <!-- <i class="fa fa-qrcode clickable" aria-hidden="true"
                                                style="margin:3px 20px 3px 20px;padding-right:45px;"
                                                onclick="document.getElementById('modal-batch-scan-qr-codes').style.display='block'"></i> -->
                                        </th>
                                        <th>Battery File</th>
                                        <th>
                                            Test Procedure
                                        </th>
                                        <!-- <th width="300">
                                        </th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr w3-repeat="items" id="batch-row-{{name}}" style="">
                                        <td><i class="fa fa-square-o color-current w3-xlarge w3-hoverable"
                                                id="batch-row-{{name}}-selected" onclick="toggleBathSelected(this.id)"
                                                aria-hidden="true"></i></td>
                                        <td class="color-moniker">
                                            <!-- <i class="fa {{state_icon}} {{state_color}} w3-xlarge"></i> -->
                                            <!-- <span>{{state}}</span> -->
                                            <!-- {{state_icon}} -->
                                            <span style="padding-right:10px;"> {{name}}</span>
                                        </td>
                                        <td>{{batch_state}}</td>
                                        <td class="" style="padding-right:50px;">
                                            <!-- <span class="w3-right" style="padding-right:20px;">
                                                <i class="fa fa-qrcode"></i>
                                            </span> -->
                                            {{uut}}
                                            <!-- <span class="w3-right" style="padding-right:20px;">
                                                <i class="fa fa-caret-down"></i>
                                            </span> -->
                                        </td>
                                        <td class="color-zero">{{battery}}</td>
                                        <td class="color-zero">
                                            {{test}}
                                            <!-- <span class="w3-right" style="padding-right:20px;">
                                                <i class="fa fa-caret-down"></i>
                                            </span> -->
                                            <!-- <div class="w3-dropdown-hover" style="padding-left:25px;">
                                                <i class="fa fa-caret-down"></i>
                                                <div class="w3-dropdown-content w3-bar-block w3-border">
                                                    <a href="#" class="w3-bar-item w3-button">Link 1</a>
                                                    <a href="#" class="w3-bar-item w3-button">Link 2</a>
                                                    <a href="#" class="w3-bar-item w3-button">Link 3</a>
                                                </div>
                                            </div> -->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- <div class="w3-roww-padding" style="margin-top:25px;">
                <div class="w3-col s3 w3-center">&nbsp;</div>
                <div class="w3-col s2 w3-center w3-margin w3-padding" style="border:1px solid white">load battery
                </div>
                <div class="w3-col s2 w3-center w3-margin w3-padding" style="border:1px solid white">load test file
                </div>
                <div class="w3-col s2 w3-center w3-margin w3-padding" style="border:1px solid white">start test
                </div>
            </div> -->
                    </div>
                </div>

            </div>
        </div>

        <!-- VIEW -->
        <div id="view-view" style="display:none;margin-left:0px;">
            <!-- <div w3-include-html="./views/view.html"></div> -->
        </div>

        <!-- CONTROL -->
        <div id="view-control" style="display:none;margin-left:0px;">
            <!-- <div w3-include-html="./views/control.html"></div> -->
        </div>

        <!-- TESTS -->
        <div id="view-tests" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/tests.html"></div>
        </div>

        <!-- BATTERIES -->
        <div id="view-batteries" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/batteries.html"></div>
        </div>

        <!-- DEVICES -->
        <div id="view-devices" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/devices.html"></div>
        </div>

        <!-- DATA -->
        <div id="view-data" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/data.html"></div>
        </div>

        <!-- SYSTEM -->
        <div id="view-system" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/system.html"></div>
        </div>

        <!-- HELP -->
        <div id="view-help" style="display:none;margin-left:0px;">
            <div w3-include-html="./views/help.html"></div>
        </div>

        <!-- ======================================== -->

        <!-- SYSTEM -->
        <div id="view-control" style="display:none;margin-left:0px;">
        </div>

        <!-- BATTERY SETUP -->
        <!-- <div id="view-battery-setup" style="display:none;margin-left:0px;">
        </div> -->

        <!-- TEST SETUP -->
        <!-- <div id="view-test-setup" style="display:none;margin-left:0px;">
        </div> -->

        <!-- SYSTEM SETUP -->
        <!-- <div id="view-system-setup" style="display:none;margin-left:0px;">
        </div> -->

        <!-- SYSTEM -->
        <!-- <div id="view-setup" style="display:none;margin-left:0px;">
            <div w3-include-html="system.html"></div>
        </div> -->

        <!-- TRANSFER -->
        <!-- <div id="view-transfer" style="display:none;margin-left:0px;">
            <div w3-include-html="transfer.html"></div>
        </div> -->

        <!-- PARAMETERS -->
        <!-- <div id="view-parameters" style="display:none;margin-left:0px;">
            <div w3-include-html="configuration.html"></div>
        </div> -->

        <!-- CONTEXTUAL HELP -->
        <!-- <div id="view-contextual-help" style="display:none;margin-left:0px;">
            <div w3-include-html="contextual-help.html"></div>
        </div> -->
    </div>

    <!-- BOTTOM MENU -->
    <!-- <div class="navbar">
        <a class="w3-xlarge" onclick="clickBack()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a>
        <a class="w3-xlarge"><i class="fa fa-users" aria-hidden="true"></i></a>
        <a href="#runtime" id="runtime" class="w3-xlarge card-menu-option-selected" _style=""
            onclick="changeView('runtime', this)"><i class="fa fa-th" aria-hidden="true"></i> Runtime</a>
        <a href="#batch" id="batch" class="w3-xlarge" _style="" onclick="changeView('batch', this)"><i
                class="fa fa-table" aria-hidden="true"></i> Batch Operations</a>
        <a href="#contextual-help" id="contextual-help" class="w3-xlarge" style="float:right;"
            onclick="changeView(this.id, this)"><i class="fa fa-question-circle" aria-hidden="true"></i></a>
        <a href="#system" id="system" class="w3-xlarge" style="float:right;" onclick="changeView(this.id, this)"><i
                class="fa fa-cog" aria-hidden="true"></i></a>
        <a href="#configuration" id="configuration" class="w3-xlarge" style="float:right;min-width:0px;"
            onclick="changeView(this.id, this)"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
            Configuration</a>
        <a href="#battery-setup" id="battery-setup" class="w3-xlarge" style="float:right;display:none;"
            onclick="changeView(this.id, this)"><i class="fa fa-battery-empty" aria-hidden="true"></i> Battery
            Setup</a>
    </div> -->


    <!-- TOOLTIP -->
    <div id="tootip" class="tooltiptext"
        style="display:none;position:absolute;top:25px;left:25px;background-color:#3b3b3bd5;color:white;padding:10px;border-radius:8px;">
        Tooltip Text
    </div>

    <!-- MODAL LOAD SELECTION -->
    <div id="modal-batch-load" class="w3-modal w3-xlarge"
        style="_display:block;z-index: 9999999999;background-color: rgba(0,0,0,0.65);">
        <div class="w3-modal-content modal-dark" style="_min-height:900px;">
            <div class="w3-container w3-padding">
                <div class="w3-padding">
                    <h3 class="color-time">Batch Contol Options
                        <i class="fa fa-close w3-xlarge w3-right clickable"
                            onclick="document.getElementById('modal-batch-load').style.display='none'"></i>
                    </h3>
                    <hr />
                    <div>
                        <div>
                            <span class="w3-xlarge color-input-label">Test Procedure:</span>
                            <input id="batch-selected-test" name="batch-selected-test" type="select"
                                placeholder="Select Test Procedure" style="width:95%" />

                            <div class="w3-dropdown-hover w3-right" style="background-color:#272727;">
                                <i class="fa fa-caret-down w3-xxlarge w3-text-white" style="" aria-hidden="true"></i>
                                <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                    style="background-color:#272727;color:white;min-width:400px;">
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (2)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (3)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (4)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (5)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (6)</span>
                                </div>
                            </div>
                            <!-- <i class="fa fa-caret-down w3-xxlarge w3-right" style="_padding-left:25px;"></i> -->
                        </div>
                        <!-- <div class="w3-padding" style="width:92%;max-height:500px;overflow-y:auto;">
                            <div>19d C/2 Charge - Discharge (1)</div>
                            <div>19d C/2 Charge - Discharge (2)</div>
                            <div>19d C/2 Charge - Discharge (3)</div>
                            <div>19d C/2 Charge - Discharge (4)</div>
                            <div>19d C/2 Charge - Discharge (5)</div>
                            <div>19d C/2 Charge - Discharge (6)</div>
                        </div> -->

                        <div style="padding-top:50px;">
                            <span class="w3-xlarge color-input-label">Battery Template:</span>
                            <input id="batch-selected-test" name="batch-selected-test" type="select"
                                placeholder="Select Battery Lot File" style="width:95%">

                            <div class="w3-dropdown-hover w3-right" style="background-color:#272727;">
                                <i class="fa fa-caret-down w3-xxlarge w3-text-white" style="" aria-hidden="true"></i>
                                <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                    style="background-color:#272727;color:white;min-width:200px;">
                                    <span class="w3-bar-item clickable">TXW-2670</span>
                                    <span class="w3-bar-item clickable">LG-1203</span>
                                    <span class="w3-bar-item clickable">TXW-MI</span>
                                </div>
                            </div>
                        </div>

                        <div class="w3-center" style="padding-top:50px;display:flex;justify-content:space-evenly;">
                            <button class="w3-padding clickable w3-text-white"
                                style="width:220px;background-color:#272727;">
                                <i class="fa fa-qrcode"></i> Scan SN
                            </button>
                            <button class="w3-padding clickable w3-text-white"
                                style="width:220px;background-color:#272727;">
                                <i class="fa fa-keyboard-o"></i> Enter SN
                            </button>
                            <button class="w3-padding clickable w3-text-white"
                                style="width:220px;background-color:#272727;">
                                <i class="fa fa-ellipsis-h"></i> Generate SN
                            </button>
                        </div>

                        <!-- <div style="padding-top:50px;">
                            <span class="w3-xlarge color-input-label">Serial Number Assignment:</span>
                            <input id="batch-selected-test" name="batch-selected-test" type="select"
                                placeholder="Select Creation Method" style="width:95%">
                                <span class="">
                                    <div class="w3-dropdown-hover w3-right" style="background-color:#272727;">
                                    <i class="fa fa-caret-down w3-xxlarge w3-text-white" style=""
                                        aria-hidden="true"></i>
                                    <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                        style="background-color:#272727;color:white;min-width:200px;">
                                        <span class="w3-bar-item clickable">QR Code</span>
                                        <span class="w3-bar-item clickable">Input</span>
                                        <span class="w3-bar-item clickable">Generate</span>
                                    </div>
                                </div>
                            </span>
                        </div> -->

                    </div>
                    <br />
                </div>
            </div>
            <br />
        </div>
    </div>

    <!-- MODAL EDIT SELECTION -->
    <div id="modal-batch-edit" class="w3-modal w3-xlarge"
        style="_display:block;z-index: 9999999999;background-color: rgba(0,0,0,0.65);">
        <div class="w3-modal-content modal-dark" style="_min-height:900px;">
            <div class="w3-container w3-padding">
                <div class="w3-padding">
                    <h3 class="color-time">Edit Selected Options
                        <i class="fa fa-close w3-xlarge w3-right clickable"
                            onclick="document.getElementById('modal-batch-edit').style.display='none'"></i>
                    </h3>
                    <hr />
                    <div>
                        <div>
                            <span class="w3-xlarge color-input-label">Test Procedure:</span>
                            <input id="batch-selected-test" name="batch-selected-test" type="select"
                                placeholder="Select Test Procedure" style="width:95%" />

                            <div class="w3-dropdown-hover w3-right" style="background-color:#272727;">
                                <i class="fa fa-caret-down w3-xxlarge w3-text-white" style="" aria-hidden="true"></i>
                                <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                    style="background-color:#272727;color:white;min-width:400px;">
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (2)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (3)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (4)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (5)</span>
                                    <span class="w3-bar-item clickable">19d C/2 Charge - Discharge (6)</span>
                                </div>
                            </div>
                        </div>

                        <div style="padding-top:50px;">
                            <span class="w3-xlarge color-input-label">Battery Template:</span>
                            <input id="batch-selected-test" name="batch-selected-test" type="select"
                                placeholder="Select Battery Lot File" style="width:95%">

                            <div class="w3-dropdown-hover w3-right" style="background-color:#272727;">
                                <i class="fa fa-caret-down w3-xxlarge w3-text-white" style="" aria-hidden="true"></i>
                                <div class="w3-dropdown-content w3-bar-block w3-border w3-xlarge"
                                    style="background-color:#272727;color:white;min-width:200px;">
                                    <span class="w3-bar-item clickable">TXW-2670</span>
                                    <span class="w3-bar-item clickable">LG-1203</span>
                                    <span class="w3-bar-item clickable">TXW-MI</span>
                                </div>
                            </div>
                        </div>

                        <div class="w3-center" style="padding-top:50px;display:flex;justify-content:space-evenly;">
                            <button class="w3-padding clickable w3-text-white"
                                style="width:220px;background-color:#272727;">
                                <i class="fa fa-check"></i> Apply
                            </button>
                        </div>
                    </div>
                    <br />
                </div>
            </div>
            <br />
        </div>
    </div>

    <!-- MODAL SCAN BATTERY QR CODES -->
    <div id="modal-batch-scan-qr-codes" class="w3-modal w3-xlarge"
        style="_display:block;z-index: 9999999999;background-color: rgba(0,0,0,0.65);">
        <div class="w3-modal-content modal-dark" style="_min-height:900px;">
            <div class="w3-container w3-padding">
                <div class="w3-padding">
                    <h3 class="color-time">Scan QR Codes
                        <i class="fa fa-close w3-xlarge w3-right clickable"
                            onclick="document.getElementById('modal-batch-scan-qr-codes').style.display='none'"></i>
                    </h3>
                    <hr />
                    <div>
                        <span class="w3-large color-input-label">CH01 - Serial Number:</span>
                        <input id="batch-selected-test" name="batch-selected-test" type="select" style="width:92%"
                            disabled />
                        <i class="fa fa-qrcode w3-xxlarge w3-right" style="padding-left:25px;"></i>
                    </div>
                    <br />
                    <div>
                        <span class="w3-large color-input-label">CH02 - Serial Number:</span>
                        <input id="batch-selected-test" name="batch-selected-test" type="select" style="width:92%"
                            disabled />
                        <i class="fa fa-qrcode w3-xxlarge w3-right" style="padding-left:25px;"></i>
                    </div>
                    <br />
                    <div>
                        <span class="w3-large color-input-label">CH03 - Serial Number:</span>
                        <input id="batch-selected-test" name="batch-selected-test" type="select" style="width:92%"
                            disabled />
                        <i class="fa fa-qrcode w3-xxlarge w3-right" style="padding-left:25px;"></i>
                    </div>
                    <br />
                    <div>
                        <span class="w3-large color-input-label">CH04 - Serial Number:</span>
                        <input id="batch-selected-test" name="batch-selected-test" type="select" style="width:92%"
                            disabled />
                        <i class="fa fa-qrcode w3-xxlarge w3-right" style="padding-left:25px;"></i>
                    </div>
                    <br />
                </div>
            </div>
            <br />
        </div>
    </div>

    <!-- SCRIPT IMPORTS -->
    <script src="key.js"></script>
    <script src="data/16h.js"></script>
    <script src="data/data.js"></script>
    <script src="test-setup.js"></script>
    <script src="test-defintion.js"></script>
    <script src="battery-setup.js"></script>
    <script src="system.js"></script>
    <script src="configuration.js"></script>
    <script src="mlg.js"></script>
    <script src="w3.js"></script>
    <script src="HackTimer.js"></script>
    <script src="chart-definitions/chamber-profile-chart.js"></script>
    <script src="chart-definitions/card.js"></script>
    <script src="chart-definitions/runtime-heatmap.js"></script>
    <script src="chart-definitions/semi-circle-guage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>

    <script>
        // function submit(obj) {
        //     const date = new Date();
        //     const y = date.getFullYear();
        //     const m = date.getMonth() + 1;
        //     const d = date.getDate();
        //     const num = y*m*d;
        //     return +(obj.key) === num || +(obj.key) === 193750
        // }

        if (!submit({ key: localStorage.getItem('key') })) {
            window.location.href = `./auth.html`;
        } else {
            // setTimeout(() => { window.location.reload() }, 15 * 1000)
        }
        console.log(new Date());
    </script>

    <script>
        let language = 'en';
        const split = localStorage.getItem('user').split('');
        split[0] = split[0].toUpperCase();
        const user = split.join('');
        document.getElementById('user').innerText = user;
        if (user === 'Operator') {
            document.getElementById('subitem-configuration').style.display = 'none';
            document.getElementById('subitem-system').style.display = 'none';
            document.getElementById('subitem-transfer').style.display = 'none';
        } else if (user === 'Engineer') {
            // document.getElementById('subitem-configuration').style.display = 'none';
            document.getElementById('subitem-system').style.display = 'none';
            // document.getElementById('subitem-transfer').style.display = 'none';
        } else if (user === 'Admin') {
            // document.getElementById('subitem-configuration').style.display = 'none';
            // document.getElementById('subitem-system').style.display = 'none';
            // document.getElementById('subitem-transfer').style.display = 'none';
        }
        toggleSidebar();

        // console.log(navigator.userAgent);
        const now = Date.now();
        let show_row_monikers = localStorage.getItem('show_row_monikers') === 'false' ? false : true;
        // showRowMonikersOnDetailPage(false);
        let show_charge_discharge = localStorage.getItem('show_charge_discharge') === 'false' ? false : true;
        // showChargeDischargeOnTimeline(false);
        let card_type = localStorage.getItem('card_type') || 'large';

        // let menu_location_bottom = localStorage.getItem('menu_location_bottom') === 'true' ? true : false;
        // toggleMenuLocation(false);

        // DATA
        const chartData = new data();
        let cards = { items: [] };
        let on_test = 0;
        let paused = 0;
        let empty = 0;
        let complete = 0;
        let error = 0;
        const numChannels = 48;
        for (let x = 1; x <= numChannels; x++) {
            const offset = (Math.random() * 700);
            const count = 800;
            const uut = `TXW${(Math.random() * 10000).toFixed().padStart(4, '0')}-${(Math.random() * 100).toFixed().padStart(2, '0')}`
            const test = '19d C/2 Charge - Discharge (6)';
            const dataV = chartData.getData('v', offset, count).reverse();
            let dataI = chartData.getData('i', offset, count).reverse();
            dataI.forEach((v) => {
                v = -v;
            })

            const v = dataV[dataV.length - 1].toString().padEnd(5, '0') + 'V';
            const i = dataI[dataI.length - 1].toString().padEnd(5, '0') + 'A';
            const isCharging = dataI[dataV.length - 1] > 0;
            let state = null;

            let history = '';
            const temp = chartData.getHistory(x + Math.round(Math.random() * 10));
            temp.forEach((h, index) => {
                const pct = h.hours / 120;
                const hours = 120 * pct;

                history += `
                    <div class="_w3-dropdown-hover ${h.className}" style="width:${hours}%;opacity:100%;">
                        &nbsp;
                        <!--<div class="w3-dropdown-content w3-xlarge"
                            style="width:400px;color:#cecece;background-color:black;opacity:100%;">
                            <span style="padding-left:15px;opacity:100%;">a bunch of info</span>
                        </div>-->
                    </div>
                `;

                if (index === temp.length - 1) {
                    if (h.className === 'charge' || h.className === 'discharge' || h.className === 'on-test') { on_test++; state = 'on_test'; }
                    if (h.className === 'paused') { paused++; state = 'paused'; state = 'paused'; }
                    if (h.className === '') { complete++; state = 'complete'; state = 'complete'; }
                    if (h.className === 'empty') { empty++; state = 'empty'; state = 'empty'; }
                    if (h.className === 'error') { error++; state = 'error'; state = 'error'; }
                    if (h.className === 'wait') { on_test++; state = 'wait'; }
                    if (h.className === 'rest') { on_test++; state = 'rest'; }
                }
            })
            // const battery_info = (
            //     template_name,
            //     template_version,
            //     serial_number,
            //     work_request,
            //     project_name,
            //     project_engineer,
            //     lot
            // ) => {
            //     return {
            //         template_name,
            //         template_version,
            //         serial_number,
            //         work_request,
            //         project_name,
            //         project_engineer,
            //         manufacturer: 'TXW',
            //         chemistry: 'LiFePO',
            //         lot,
            //         mass: '2.3g',
            //         rated_capacity: '2.0',
            //         max_voltage: '3.8',
            //         max_current: '2.2',
            //         result_naming: '',
            //         description: ''
            //     }
            // }
            const templates = [
                {
                    template_name: 'TXW-IN',
                    template_version: 'v003',
                    serial_number: '',
                    work_request: '278561',
                    project_name: 'Project A',
                    project_engineer: 'Dan O.',
                    lot: '2180'
                },
                {
                    template_name: 'TXW-MI',
                    template_version: 'v007',
                    serial_number: '',
                    work_request: '329014',
                    project_name: 'Project B',
                    project_engineer: 'Eric S.',
                    lot: '3207'
                },
                {
                    template_name: 'TXW-CA',
                    template_version: 'v019',
                    serial_number: '',
                    work_request: 'WR5436',
                    project_name: 'Project C',
                    project_engineer: 'Dave E.',
                    lot: '9327'
                }
            ];
            const getBatteryInfo = (index) => {
                const v = templates[index];
                const batteryInfo = {
                    template_name: v.template_name,
                    template_version: v.template_version,
                    serial_number: v.serial_number,
                    work_request: v.work_request,
                    project_name: v.project_name,
                    project_engineer: v.project_engineer,
                    manufacturer: 'TXW',
                    chemistry: 'LiFePO',
                    lot: v.lot,
                    lot_date_time: null, // TODO: not a version control system
                    mass: '2.3g',
                    rated_capacity: '2.0Ah',
                    max_voltage: '3.8V',
                    max_current: '2.2A',
                    result_naming: '',
                    description: '',
                    card_index: index,
                }
                return batteryInfo;
            }
            cards.battery_templates = templates;
            // cards.batteries = [];
            // cards.batteries.push(
            //     battery_info(
            //         `TXW-IN`,
            //         'v003',
            //         `TXW${(Math.random() * 10000).toFixed().padStart(4, '0')}-${(Math.random() * 100).toFixed().padStart(2, '0')}`,
            //         '278651',
            //         'Project A',
            //         'Dan O.',
            //         '1260'
            //     ))


            cards.chambers = [];
            [106, 107, 108, 109].forEach((v, i) => {
                cards.chambers.push({
                    name: v.toString(),
                    data: [0, -40, 0, 20, 40, 0].sort(() => .5 - Math.random()),
                });
                const ax = Math.floor(6 * Math.random()); // annotation x
                const c = cards.chambers[cards.chambers.length - 1];
                c.ax = ax;
                c.temp = c.data[ax];
            });

            const chamber = cards.chambers[Math.floor(4 * Math.random())];
            cards.items.push({
                name: `CH${x < 10 ? '0' + x : x}`,
                state_icon: 'fa-square',
                state_color: 'w3-text-green',
                icon: isCharging ? `<img src="./assets/runtime/charge.png" height="35" style="padding-right:10px;" />` : `<img src="./assets/runtime/discharge.png" height="35" style="padding-right:10px;" />`,
                card_icon: isCharging ? `<img src="./assets/runtime/charge.png" height="30" style="" />` : `<img src="./assets/runtime/discharge.png" height="30" style="" />`,
                // data: chartData.getData('v', (Math.random() * 100), 50),
                v,
                i,
                st: (8 * Math.random()).toString().substring(0, 3) + 'h', /** step time */
                dataV,
                dataI,
                chart_options: JSON.parse(JSON.stringify(card_chart_options)),
                // chart_options: JSON.parse(JSON.stringify(guage_options)),
                uut,
                test,
                step: isCharging ? 'CC Charge' : 'CC Discharge',
                step_description: isCharging ? 'Charge C/2' : 'Discharge C/2',
                battery: `${uut}`,
                cycles: Math.floor(50 * Math.random()),
                requested_cycles: 50,
                de: null,
                dc: null,
                ee: null,
                ce: null,
                state,
                history,
                battery_info: getBatteryInfo(Math.floor((3 * Math.random()))),
                chamber: chamber.name,
                chamber_temp: chamber.temp
            });
        }
        const numPages = Math.ceil(cards.items.length / 6);
        const temp = { pages: [] };
        for (let x = 1; x <= numPages; x++) {
            temp.pages.push({ name: x.toString() });
        }
        cards.pages = temp.pages;


        // /** UPDATE COUNTS */
        let elem = document.getElementById('count_all');
        elem.innerText = numChannels;
        elem.classList.add('color-current');

        elem = document.getElementById('count_on_test');
        elem.innerText = on_test;
        elem.classList.add(on_test > 0 ? 'color-current' : 'color-zero');

        elem = document.getElementById('count_paused');
        elem.innerText = paused;
        elem.classList.add(paused > 0 ? 'color-current' : 'color-zero');

        elem = document.getElementById('count_complete');
        elem.innerText = complete;
        elem.classList.add(complete > 0 ? 'color-current' : 'color-zero');

        elem = document.getElementById('count_empty');
        elem.innerText = empty;
        elem.classList.add(empty > 0 ? 'color-current' : 'color-zero');

        elem = document.getElementById('count_error');
        elem.innerText = error;
        elem.classList.add(error > 0 ? 'color-current' : 'color-zero');

        // /** ALTER CARDS BASED ON STATE */
        cards.items.forEach((v) => {
            const getBatchState = (icon, text, backgroundColor, color) => {
                // width:175px; + change to div
                return `<span class="" style="font-size:20px;color:${color};;background-color:${backgroundColor};border-radius:10px;padding:3px;padding-right:10px;">
                    <i class="fa ${icon} w3-large" style="color:${color};padding-left:5px;padding-right:5px;padding-top:0px;"></i>
                    ${text}
                    </span>`
            }
            if (v.state === 'empty') {
                v.batch_state = '<span class="color-zero">EMPTY</span>';
                v.card_icon = '<span class="color-zero">EMPTY</span>';
                v.card_step = v.batch_state;
                v.state_icon = '<i class="fa fa-circle-o w3-xlarge color-zero"></i>';
                v.state_color = 'color-empty';
                v.icon = '<i class="fa fa-circle-o w3-xlarge color-zero"></i>';
                v.table_step_icon = '';
                v.test = '';
                v.step = '';
                v.battery = '';
                v.dataV = [];
                v.dataI = [];
                v.v = '';
                v.i = ''
                v.st = '';
                v.cycles = '0';
                // v.requested_cycles = '';
                v.uut = `<span class="color-zero"></span>`;
                v.badge_icon = 'fa-circle-o';
                // v.batch_state = `<span class="" style="font-size:20px;color:#969696;;background-color:#3d3d3d;border-radius:10px;padding:3px;padding-right:15px;"><i class="fa ${v.badge_icon} w3-large" style="color:#969696;padding-left:10px;padding-right:10px;padding-top:0px;"></i>Empty</span>`;
                v.batch_state = getBatchState('fa-circle-o', 'Empty', '#3d3d3d', '#969696');
                v.battery_info.rated_capacity = '';
                v.battery_info.max_voltage = '';
                v.battery_info.max_current = '';
            }
            // if (v.state === 'wait') {
            //     v.batch_state = '<span class="w3-text-green">ON TEST</span>';
            //     // v.card_icon = '<i class="fa fa-thermometer-three-quarters w3-xlarge w3-text-orange" style="padding-left:10px;padding-right:10px;"></i>';
            //     v.card_icon = v.batch_state;
            //     v.card_step = v.batch_state;
            //     v.state_icon = '<i class="fa fa-clock-o w3-xlarge w3-text-green"></i>';
            //     v.state_color = 'w3-text-green';
            //     // v.icon = '<img src="./assets/hourglass.png" height="35" style="padding-right:10px;" />';
            //     v.icon = '<i class="fa fa-thermometer-three-quarters w3-xlarge w3-text-orange" style="padding-left:10px;padding-right:10px;"></i>';
            //     // v.test = '';
            //     v.step = 'Wait';
            //     v.table_step_icon = v.icon;
            //     // v.battery = '';
            //     v.dataV = [];
            //     v.dataI = [];
            //     // v.v = '';
            //     // v.i = ''
            //     // v.st = '';
            //     // v.cycles = '0';
            //     // v.requested_cycles = '';
            //     // v.uut = `<span class="color-zero"></span>`;
            // }
            // if (v.state === 'rest') {
            //     v.batch_state = '<span class="w3-text-green">ON TEST</span>';
            //     v.card_icon = '<i class="fa fa-clock-o w3-large w3-text-green" style="padding-left:10px;padding-right:10px;"></i>';
            //     v.icon = '<i class="fa fa-hourglass-half w3-large w3-text-light-gray" style="padding-left:10px;padding-right:10px;"></i>';
            //     v.card_icon = '';
            //     v.card_step = '';
            //     v.state_icon = '<i class="fa fa-clock-o w3-large w3-text-green"></i>';
            //     v.state_color = 'w3-text-green';
            //     // v.icon = '<img src="./assets/hourglass.png" height="35" style="padding-right:10px;" />';
            //     // v.test = '';
            //     v.step = 'Rest';
            //     v.table_step_icon = v.icon;
            //     // v.battery = '';
            //     v.dataV = [];
            //     v.dataI = [];
            //     // v.v = '';
            //     // v.i = ''
            //     // v.st = '';
            //     // v.cycles = '0';
            //     // v.requested_cycles = '';
            //     // v.uut = `<span class="color-zero"></span>`;
            // }
            if (v.state === 'error') {
                v.batch_state = '<span style="color:red">ERROR</span>';
                v.card_icon = '<span class="w3-text-red">ERROR</span>';
                v.card_step = v.batch_state;
                v.state_icon = '<i class="fa fa-times-circle w3-xlarge w3-text-red"></i>';
                v.state_color = 'w3-text-red';
                v.icon = '<i class="fa fa-times-circle w3-xlarge w3-text-red"></i>';
                // v.test = '';
                v.step = '';
                v.table_step_icon = '';
                v.battery = '';
                v.dataV = [];
                v.dataI = [];
                v.v = '';
                v.i = ''
                v.st = '';
                // v.cycles = '';
                // v.requested_cycles = '';
                // v.uut = '<span style="color:red">ERROR</span>';

                // v.badge_icon = 'fa-times-circle';
                // v.batch_state = `<span class="w3-text-white" style="font-size:20px;background-color:red;border-radius:10px;padding:3px;padding-right:15px;"><i class="fa ${v.badge_icon} w3-large w3-text-white" style="padding-left:10px;padding-right:10px;"></i>Error</span>`;
                v.batch_state = getBatchState('fa-times-circle', 'Error', 'Red', 'white');
            }
            if (v.state === 'paused') {
                v.batch_state = '<span class="w3-text-black" style="font-size:20px;background-color:#fcd00e;border-radius:10px;padding:3px;padding-right:15px;"><i class="fa fa-pause w3-large w3-text-black" style="padding-left:10px;padding-right:10px;padding-top:0px;"></i>Paused</span>';
                v.card_icon = '<span class="w3-text-yellow">PAUSED</span>';
                v.card_step = v.batch_state;
                v.state_icon = '<i class="fa fa-pause-circle-o w3-xlarge w3-text-yellow"></i>';
                v.state_color = 'w3-text-yellow';
                v.icon = '<i class="fa fa-pause-circle-o w3-xlarge w3-text-yellow"></i>';
                v.v = '';
                v.i = ''
                v.st = '';
                v.step = '';
                v.table_step_icon = '';
                start = Math.floor(150 * Math.random());
                for (let y = start; y >= 0; y--) {
                    v.dataV[v.dataV.length - y] = null; // v.dataV[start] ;
                    v.dataI[v.dataI.length - y] = null; // 0 ;
                }
            }
            if (v.state === 'complete') {
                v.batch_state = '<span class="w3-text-white">COMPLETE</span>';
                v.card_icon = '<span class="">COMPLETE</span>';
                v.card_step = v.batch_state;
                v.state_icon = '<i class="fa fa-check w3-xlarge w3-text-white"></i>';
                v.state_color = 'w3-text-white';
                v.icon = '<i class="fa fa-check w3-xlarge w3-text-white"></i>';
                v.v = '';
                v.i = ''
                v.st = '';
                v.step = '';

                v.table_step_icon = '';
                v.cycles = '50';
                start = Math.floor(150 * Math.random());
                for (let y = start; y >= 0; y--) {
                    v.dataV[v.dataV.length - y] = null; // v.dataV[start] ;
                    v.dataI[v.dataI.length - y] = null; // 0 ;
                }
                // v.badge_icon = 'fa-check';
                // v.batch_state = `<span class="w3-text-black" style="font-size:20px;background-color:#c0c0c0;border-radius:10px;padding:3px;padding-right:15px;"><i class="fa ${v.badge_icon} w3-large w3-text-black" style="padding-left:10px;padding-right:10px;padding-top:0px;"></i>Complete</span>`;
                v.batch_state = getBatchState('fa-check', 'Complete', '#c0c0c0', 'black');
            }
            if (v.state === 'on_test') {
                const isCharging = v.dataI[v.dataV.length - 1] > 0;
                // v.batch_state = '<span class="w3-text-green">ON TEST</span>';
                v.card_icon = v.batch_state;
                v.card_step = v.step;
                v.state_icon = '<i class="fa fa-clock-o w3-xlarge w3-text-green"></i>';
                v.table_step_icon = v.icon;
                // v.state_icon = 'fa-clock-o w3-xlarge';
                // v.state_icon = 'fa-circle-o-notch w3-xlarge';

                if (Math.floor(Math.random() * 100) % 5 === 0) {
                    if (Math.floor(Math.random() * 100) % 2 === 0) {
                        v.step = 'Rest';
                        v.i = '0.000';
                        v.table_step_icon = '<i class="fa fa-clock-of w3-large w3-text-light-gray" style="padding-left:10px;padding-right:10px;"></i>';
                        v.icon = '<i class="fa fa-hourglass-half w3-medium w3-text-light-gray" style="padding-left:10px;padding-right:10px;"></i>';
                    } else {
                        v.step = 'Wait';
                        v.step_description = 'Wait for Chamber Temp'
                        v.i = '0.000';
                        v.table_step_icon = '<i class="fa fa-thermometer-half w3-xlarge w3-text-orange" style="padding-left:10px;padding-right:10px;"></i>';
                        v.icon = '<i class="fa fa-thermometer-half w3-large w3-text-orange" style="padding-left:10px;padding-right:10px;"></i>';
                    }
                }
                v.badge_icon = 'fa-arrow-up';
                v.badge_icon = isCharging ? 'fa-arrow-up' : v.badge_icon;
                v.badge_icon = !isCharging ? 'fa-arrow-down' : v.badge_icon;
                v.badge_icon = v.step === 'Wait' ? 'fa-thermometer-half' : v.badge_icon;
                v.badge_icon = v.step === 'Rest' ? 'fa-clock-o' : v.badge_icon;
                // v.batch_state = `<span class="w3-text-black" style="font-size:20px;background-color:#70ad47;border-radius:10px;padding:3px;padding-right:15px;"><i class="fa ${v.badge_icon} w3-large w3-text-black" style="padding-left:10px;padding-right:10px;padding-top:0px;"></i>${v.step}</span>`;
                v.batch_state = getBatchState(v.badge_icon, v.step, '#70ad47', 'black');
            }
        })

        const series = [
            {
                data: [
                    { x: 'On Test', y: on_test },
                    { x: 'Paused', y: paused },
                    { x: 'Empty', y: empty },
                    { x: 'Complete', y: complete },
                    { x: 'Error', y: error },
                ]
            }
        ];

        document.getElementById('content').style.display = 'block';
        w3.displayObject("cards", cards);
        w3.displayObject("batch-view", cards);
        selectCardType(card_type);


        /** ALTER CARDS BASED ON STATE */
        cards.items.forEach((v) => {
            // if (!v.icon.endsWith('empty.png')) {
            //     document.getElementById(`card-icon-${v.name}`).style.display = ''
            // }

            //     if (v.state === 'error') {
            //         document.getElementById(v.name).style.borderColor = 'red';
            //         document.getElementById(v.name).style.backgroundColor = '#ff000021';
            //         document.getElementById(`card-chart-${v.name}`).style.display = 'none';
            //     }
            //     if (v.state === 'empty') {
            //         // document.getElementById(v.name).style.borderColor = '#f9f9f963';
            //         // document.getElementById(v.name).style.backgroundColor = '#64646421';
            //         document.getElementById(`card-chart-${v.name}`).style.display = 'none';
            //         const elem = document.getElementById(`card-name-${v.name}`);
            //         elem.classList.remove('color-moniker');
            //         elem.classList.add('color-zero');
            //     }
        })

        w3.includeHTML(() => {
            const searchParams = new URLSearchParams(window.location.search);
            init();
        });

        filterRuntime('all');


        function update(onDemand = false) {
            // this.get(`${config.urlLocationTracking}/status/${config.facility}/*/true?token=123`).then((v) => {
            //     if (!onDemand) {
            //         setTimeout(() => { update(); }, 5000);
            //     }
            // });

            cards.items.forEach((v) => {
                updateChart(v.name, v.dataV, v.chart_options);

                /** update percent complete */
                const pct = 100 * (v.cycles / v.requested_cycles);
                // let elem = document.getElementById(`${v.name}-progress-complete`);
                // elem.style.width = `${pct}%`;
                // elem = document.getElementById(`${v.name}-progress-requested`);
                // elem.style.width = `${100 - pct}%`;

                let elem = document.getElementById(`${v.name}-progress-complete-table`);
                elem.style.width = `${pct}%`;
                elem = document.getElementById(`${v.name}-progress-requested-table`);
                elem.style.width = `${100 - pct}%`;
            })

            // optionsHeatmap.series = series;
            // var chartHeatmap = new ApexCharts(document.querySelector("#chart-heatmap"), optionsHeatmap);
            // chartHeatmap.render();
        }

        let chartDetailV = null;
        let chartDetailI = null;
        let monikers = {};
        function init() {
            update();

            // QR CODE
            const qrcode = new QRCode(document.getElementById('qrcode'), {
                // text: 'https://offsite-ryan.github.io/xct/#runtime',
                text: window.location.origin + window.location.pathname + '#runtime',
                width: 175,
                height: 175,
                colorDark: '#fff',
                colorLight: '#000',
                correctLevel: QRCode.CorrectLevel.H
            });

            const optionsV = JSON.parse(JSON.stringify(card_chart_options));
            optionsV.chart.height = '300';
            optionsV.chart.group = 'detail';
            optionsV.chart.id = 'V';
            optionsV.series[0].name = 'V';
            optionsV.chart.sparkline.enabled = false;
            optionsV.tooltip.enabled = true;
            optionsV.chart.toolbar.show = true;
            optionsV.chart.toolbar.offsetX = -60;
            optionsV.yaxis[0].min = 2;
            optionsV.yaxis[0].max = 5;
            optionsV.yaxis[0].title.text = 'Voltage';
            optionsV.yaxis[0].show = true;
            optionsV.chart.type = 'line';
            delete optionsV.fill;
            optionsV.colors = ['#adff2f'];
            optionsV.tooltip.custom = card_chart_options.tooltip.custom;

            optionsV.series[0].data = cards.items[0].dataV;
            chartDetailV = new ApexCharts(document.getElementById(`chart-detail-1`), optionsV);
            chartDetailV.render();

            const optionsI = JSON.parse(JSON.stringify(card_chart_options));
            optionsI.chart.height = '300';
            optionsI.chart.group = 'detail';
            optionsI.chart.id = 'I';
            optionsI.series[0].name = 'I';
            optionsI.chart.sparkline.enabled = false;
            optionsI.tooltip.enabled = true;
            optionsI.chart.toolbar.show = true;
            optionsI.chart.toolbar.offsetX = -60;
            optionsI.yaxis[0].min = -1;
            optionsI.yaxis[0].max = 1;
            optionsI.yaxis[0].title.text = 'Current';
            optionsI.yaxis[0].show = true;
            optionsI.chart.type = 'line';
            delete optionsI.fill;
            optionsI.colors = ['#75e0f0'];
            optionsI.tooltip.custom = card_chart_options.tooltip.custom;

            optionsI.series[0].data = cards.items[0].dataI;
            chartDetailI = new ApexCharts(document.getElementById(`chart-detail-2`), optionsI);
            chartDetailI.render();

            // const chartChamber = new ApexCharts(document.getElementById(`chamber-profile-chart`), optionsChamber);
            // chartChamber.render();

            optionsChamber.chart.height = 150;
            cards.chambers.forEach((v) => {
                const chartChamber2 = new ApexCharts(document.getElementById(`chamber-profile-chart-${v.name}`), optionsChamber);
                chartChamber2.render();
                const r = v.ax; // Math.floor(6 * Math.random()) + 1;
                console.log(r);
                chartChamber2.updateOptions({
                    series: [{
                        data: v.data
                    }],
                    annotations: {
                        xaxis: [{
                            x: r + (v.ax === 0 ? 0.025 : -0.025),
                            x2: r,
                            opacity: 1,
                            borderColor: '#775DD0',
                            // label: {
                            //     borderColor: '#775DD0',
                            //     position: 'top',
                            //     orientation: 'verticle',
                            //     offsetY: -8,
                            //     text: '40 °C',
                            //     style: {
                            //         fontSize: '12px',
                            //         color: '#fff',
                            //         background: '#775DD0',
                            //     },
                            // }
                        }]
                    }
                });
            });


            // BATTERIES
            const obj = { batteries: [] };
            cards.items.forEach((v, i) => {
                if (v.uut.startsWith('<span') === false) {
                    obj.batteries.push({
                        serial_number: v.uut,
                        location: v.name,
                        project_name: v.battery_info.project_name,
                        project_engineer: v.battery_info.project_engineer,
                        template_name: v.battery_info.template_name,
                        template_version: v.battery_info.template_version,
                        card_index: i,
                    });
                }
            })
            // w3.displayObject("batteries", obj);

            showView();
            changeLanguage(language);
        }

        // ----- SHOW DETAIL -----
        function clickRow(rowNum) {
            const name = `CH${rowNum.toString().padStart(2, '0')}`
            clickCard(name);

            cards.items.forEach((v) => {
                document.getElementById(`table-row-${v.name}`).classList.remove('table-row-selected');
            })

            document.getElementById(`table-row-${name}`).classList.add('table-row-selected');
            // /* ENABLE WHEN TIMELINE TESTBEDS EXIST */
            document.getElementById(`timeline-row-${name}`).classList.add('table-row-selected');
        }
        function clickCard(name) {

            document.getElementById('title').innerText = `BTS - ${name}`
            const channel = name.replace('CH', '');
            const channelNum = +(channel);

            const isDetailShown = location.hash.startsWith(`#detail-`);
            location.hash = `#detail-${name}`;

            const row = Math.floor((channelNum % 6 === 0) ? (channelNum / 6) - 1 : channelNum / 6);
            let col = +(name.substring(2)) - (row * 6);
            col = col === 0 ? 5 : col - 1;
            console.log(name, row, col);

            const start = row * 6;
            const end = start + 6;
            // console.log(start, end);

            // let filtered = { items: [] };
            // filtered = { items: cards.items.filter((v, i) => i >= start && i < end) };
            // filtered.pages = temp.pages;
            // w3.displayObject("cards", filtered);
            document.getElementById('cards').style.display = '';
            // filtered.items.forEach((v) => {
            //     updateChart(v.name, v.dataV, v.chart_options);
            // })

            document.getElementById('detail').style.display = '';
            document.getElementById('overview-counts').style.display = '';
            document.getElementById('chamber-view').style.display = 'none';

            // document.getElementById('table-view').style.display = 'none';
            // document.getElementById('pager').style.display = 'none';

            const selected = cards.items.find((v) => v.name === name);
            document.getElementById('test-6-detail-test').innerHTML = selected.test;

            let indexCards = 0;
            let countCards = 0
            for (let x = 1; x <= numChannels; x++) {
                elem = document.getElementById(`CH${x.toString().padStart(2, '0')}`);
                elem.classList.remove('card-selected');
                countCards += elem.parentElement.classList.contains('w3-hide') ? 0 : 1;
                if (elem.id === name) {
                    indexCards = countCards;
                }
            }
            chartDetailV.updateSeries([{ data: selected.dataV }]);
            chartDetailI.updateSeries([{ data: selected.dataI }]);


            document.getElementById(name).classList.add('card-selected');
            document.getElementById('detail-name').innerText = name;
            document.getElementById('detail-batch-state').innerHTML = selected.batch_state;
            document.getElementById('detail-uut').innerHTML = selected.uut;
            document.getElementById('detail-step').innerHTML = selected.step_description;

            document.getElementById('detail-v').innerText = selected.v;
            document.getElementById('detail-i').innerText = selected.i;
            document.getElementById('detail-t').innerText = selected.st;

            document.getElementById('detail-cycles').innerHTML = selected.cycles;
            document.getElementById('detail-requested').innerText = selected.requested_cycles;

            document.getElementById('detail-rated-capacity').innerText = selected.battery_info.rated_capacity;
            document.getElementById('detail-max-voltage').innerText = selected.battery_info.max_voltage;
            document.getElementById('detail-max-current').innerText = selected.battery_info.max_current;
            // document.getElementById('pager').style.display = 'none';

            // selectCardType(card_type);
            // selectPage(row + 1);

            // HIDE TOP ON DETAIL
            if (!show_row_monikers) {
                document.getElementById('card-view').style.display = 'none';
                document.getElementById('table-view').style.display = 'none';
                document.getElementById('timeline-view').style.display = 'none';
                // document.getElementById('pager').style.display = 'none';
            }

            elem = document.getElementById('card-view');
            elem.style.flexFlow = '';
            elem.style.justifyContent = 'flex-start';
            elem.style.overflowX = 'scroll';
            // elem.style.marginBottom = '40px;';
            elem.style.scrollbarColor = '#5d5d5d #2f2f2f';
            if (isDetailShown === false) {
                elem.scrollLeft = document.getElementById('card-view').scrollWidth * ((indexCards - 1) / countCards);
            }

            elem = document.getElementById('table-view');
            elem.style.maxHeight = '210px';
            elem.style.overflowY = 'scroll';
            elem.style.scrollbarColor = '#5d5d5d #2f2f2f';
            if (isDetailShown === false) {
                elem.scrollTop = (indexCards * 53.5) - 53.5;
            }
            document.getElementById('table-view-header').style.top = '0px';

            elem = document.getElementById('timeline-view');
            elem.style.maxHeight = '300px';
            elem.style.overflowY = 'scroll';
            elem.style.scrollbarColor = '#5d5d5d #2f2f2f';
            if (isDetailShown === false) {
                elem.scrollTop = (indexCards * 53.5) - 53.5;
            }
            document.getElementById('timeline-view-header').style.top = '0px';
        }

        function closeDetail() {
            document.getElementById('detail').style.display = 'none';
            document.getElementById('overview-counts').style.display = '';

            for (let x = 1; x <= numChannels; x++) {
                document.getElementById(`CH${x.toString().padStart(2, '0')}`).classList.remove('card-selected');
            }
            let elem = document.getElementById('card-view');
            elem.style.flexDirection = 'row';
            elem.style.flexWrap = 'wrap';
            // elem.style.justifyContent = 'center';
            elem.style.overflowX = '';

            elem = document.getElementById('table-view');
            elem.style.maxHeight = '';
            elem.style.overflowY = '';
            elem.style.scrollbarColor = '';
            cards.items.forEach((v) => {
                document.getElementById(`table-row-${v.name}`).classList.remove('table-row-selected');
            })
            document.getElementById('table-view-header').style.top = '195px';
            // document.getElementById('table-view-header').classList.replace('sticky-detail','sticky');

            elem = document.getElementById('timeline-view')
            elem.style.maxHeight = '';
            elem.style.overflowY = '';
            elem.style.scrollbarColor = '';
            cards.items.forEach((v) => {
                document.getElementById(`timeline-row-${v.name}`).classList.remove('table-row-selected');
            })
            document.getElementById('timeline-view-header').style.top = '195px';

            const isChamber = localStorage.getItem('card_type') === 'chamber';
            if (isChamber) {
                elem = document.getElementById('chamber-view');
                elem.style.display = 'flex';
                document.getElementById('table-view-header').style.top = '575px';
            }
            location.hash = `#runtime`;
        }

        function updateChart(name, data, chart_options) {
            chart_options.series[0].data = data;
            // card_chart_options.chart.sparkline.enabled = true;
            var chart = new ApexCharts(document.getElementById(`card-chart-${name}`), chart_options);
            // var chart = new ApexCharts(document.getElementById(`card-chart-${name}`), guage_options);
            chart.render();
        }

        // Define the function to screenshot the div
        function copyDetail() {
            update = false;
            let div = document.getElementById('detail');
            div.scrollIntoView();

            // Use the html2canvas function to take a screenshot and append it to the output div
            html2canvas(div).then(
                function (canvas) {
                    canvas.toBlob(function (blob) {
                        const item = new ClipboardItem({ "image/png": blob });
                        navigator.clipboard.write([item]);
                    });
                })
        }

        // ----- CLICK PAGER -----
        function clickPager(v) {
            if (v === 'ALL') {
                closeDetail()
            } else {
                console.log(+(v));
                const row = (+v);
                const channel = (((row - 1) * 6) + 1).toString().padStart(2, '0');
                console.log(`CH${channel}`);
                clickCard(`CH${channel}`);
                selectPage(v);
            }
        }

        function selectPage(num) {
            const elem = document.getElementById(`page-${num}`);
            elem.style.fontWeight = 'bold';
            elem.style.fontSize = '1.3rem';
            elem.classList.remove('color-font');
            elem.classList.add('color-current');
        }

        function selectCardType(type) {
            // document.styleSheets[1].cssRules[6].style.minHeight = null
            // console.log(type);
            card_type = type;
            localStorage.setItem('card_type', type);

            ['menu-view-large', 'menu-view-small', 'menu-view-table', 'menu-view-timeline'].forEach((v) => {
                document.getElementById(v).classList.replace('card-menu-option-selected', 'card-menu-option-unselected');
            })
            document.getElementById(`menu-view-${type}`).classList.replace('card-menu-option-unselected', 'card-menu-option-selected');

            document.getElementById('card-view').style.display = 'none';
            document.getElementById('table-view').style.display = 'none';
            document.getElementById('timeline-view').style.display = 'none';
            document.getElementById('chamber-view').style.display = 'none';
            document.getElementById('table-view-header').classList.replace('sticky-chamber', 'sticky');

            if (type === 'large') {
                document.getElementById('card-view').style.display = 'flex';
                let elems = document.getElementsByName('card-chart');
                for (let e of elems) {
                    e.style.display = 'block';
                }
                elems = document.getElementsByClassName('card');
                for (let e of elems) {
                    e.style.minHeight = '275px';
                    e.style.maxHeight = '275px';
                }
            } else if (type === 'small') {
                document.getElementById('card-view').style.display = 'flex';
                let elems = document.getElementsByName('card-chart');
                for (let e of elems) {
                    e.style.display = 'none';
                }
                elems = document.getElementsByClassName('card');
                for (let e of elems) {
                    e.style.minHeight = '0px';
                }
            } else if (type === 'table') {
                document.getElementById('table-view').style.display = 'block';
            } else if (type === 'timeline') {
                document.getElementById('timeline-view').style.display = 'block';
            } else if (type === 'chamber') {
                document.getElementById('chamber-view').style.display = 'flex';
                elems = document.getElementsByClassName('card-chamber');
                for (let e of elems) {
                    e.style.minHeight = '350px';
                    e.style.maxHeight = '350px';
                }
                document.getElementById('table-view').style.display = 'block'
                document.getElementById('table-view-header').classList.replace('sticky', 'sticky-chamber');
            }
        }

        function selectChartType(type) {

        }

        function menuSelect(name) {
            document.getElementById('mySidebar').style.display = 'none';
            window.location.hash = `#${name}`;
        }
        function changeView(name, elem, rowIndex = null) {
            const updateMenu = (id) => {
                // ['runtime', 'batch', 'battery-setup', 'contextual-help', 'system', 'configuration'].forEach((v) => {
                //     document.getElementById(v).classList.remove('card-menu-option-selected');
                //     if (id === v) {
                //         elem.classList.add('card-menu-option-selected');
                //     }
                // })

            }
            ['cards', 'overview-counts', 'view-batch', 'view-test-setup', 'view-battery-setup', 'view-system-setup', 'view-setup', 'view-parameters', 'view-transfer', 'view-transfer', 'view-contextual-help'].forEach((v) => {
                const elem = document.getElementById(v);
                if (elem) {
                    elem.style.display = 'none';
                }
            });

            // ['configuration-tab-view-tests','configuration-tab-view-batteries'].forEach((v) => {
            //     document.getElementById(v).style.display = 'none';
            // });

            ['runtime', 'batch', 'system', /*'transfer'*/, 'help'].forEach((v) => {
                const elem = document.getElementById(`subitem-${v}`);
                elem.style.backgroundColor = '#272727';
                elem.style.color = '';
            });


            // =============================================================

            if (['runtime', 'control', 'tests', 'batteries', 'devices', 'data', 'system', 'help', 'tests'].indexOf(name) >= 0) {
                ['runtime', 'batch', 'tests', 'batteries', 'devices', 'data', 'system', 'help', 'tests'].forEach((v) => {
                    const elem = document.getElementById(`subitem-${v}`);
                    elem.style.backgroundColor = '#272727';
                    elem.style.color = '';
                });
                ['tests', 'batteries', 'devices'].forEach((v) => {
                    document.getElementById(`view-${v}`).style.display = 'none';
                });
                ['view-data', 'overview-counts', 'configuration-test', 'test-view', 'view-tests', 'view-help', 'view-parameters', 'view-system', 'view-batteries'].forEach((v) => {
                    const elem = document.getElementById(`${v}`);
                    if (elem) {
                        elem.style.display = 'none';
                    }
                });

                document.getElementById('title').innerText = `BTS - ${name}`;
                document.getElementById(`subitem-${name}`).style.color = '#1599ac';
                document.getElementById(`subitem-${name}`).style.backgroundColor = '#1e1e1e';
                if (name === 'view') {
                    document.getElementById('view').innerText = 'Channels';
                } else if (name === 'control') {
                    document.getElementById('view').innerText = 'Contol - Batch Operations';
                } else if (name === 'tests') {
                    document.getElementById('view').innerText = 'Tests';
                } else if (name === 'batteries') {
                    document.getElementById('view').innerText = 'Batteries';
                } else if (name === 'devices') {
                    document.getElementById('view').innerText = 'Devices';
                } else if (name === 'data') {
                    document.getElementById('view').innerText = 'Data';
                } else if (name === 'system') {
                    document.getElementById('view').innerText = 'System';
                } else if (name === 'help') {
                    document.getElementById('view').innerText = 'Help';
                }
                elem = document.getElementById(`view-${name}`);
                if (elem) {
                    elem.style.display = 'block';
                }
            }

            // =============================================================

            if (name === 'runtime') {
                const formatDate = (offset) => {
                    // Sun Jul 28 2024 09:24:03 GMT-0400 (Eastern Daylight Time)
                    const d = new Date(Date.now() - (offset * 24 * 60 * 60 * 1000));
                    const split = d.toString().split(' ');
                    return `${split[2]}-${split[1]}`;
                }
                for (let x = 0; x < 5; x++) {
                    document.getElementById(`day-minus-${x}`).innerText = formatDate(x);
                }

                document.getElementById('subitem-runtime').style.color = '#1599ac';
                document.getElementById('subitem-runtime').style.backgroundColor = '#1e1e1e';
                document.getElementById('title').innerText = 'BTS - Channel View'
                document.getElementById('cards').style.display = 'block';
                document.getElementById('overview-counts').style.display = 'block';
                document.getElementById('view').innerText = 'Channel View';
                document.getElementById('runtime-select-view').style.display = 'block';
                // document.getElementById('chart-heatmap').style.display = 'block';
                // closeDetail();
                updateMenu(name);
            } else if (name === 'batch') {
                document.getElementById('subitem-batch').style.color = '#1599ac';
                document.getElementById('subitem-batch').style.backgroundColor = '#1e1e1e';
                document.getElementById('title').innerText = 'BTS - Control'
                document.getElementById('overview-counts').style.display = 'block';
                document.getElementById('view').innerText = 'Control - Batch Operations';
                document.getElementById('view-batch').style.display = 'block';
                document.getElementById('runtime-select-view').style.display = 'none';
                // document.getElementById('chart-heatmap').style.display = 'block';
                updateMenu(name);
            } else if (name === 'contextual-help') {
                document.getElementById('subitem-help').style.color = '#1599ac';
                document.getElementById('subitem-help').style.backgroundColor = '#1e1e1e';
                document.getElementById('title').innerText = 'BTS - Help'
                document.getElementById('view').innerText = 'Help';
                // document.getElementById('view-contextual-help').style.display = 'block';
                // document.getElementById('chart-heatmap').style.display = 'none';
                updateMenu(name);
            }



            // else if (name === 'systems') {
            //     document.getElementById('subitem-systems').style.color = '#1599ac';
            //     // document.getElementById('subitem-systems').style.color = 'red';
            //     document.getElementById('title').innerText = 'BTS - Site Overview'
            //     document.getElementById('overview-counts').style.display = 'none';
            //     document.getElementById('view').innerText = 'Site Overview';
            //     document.getElementById('view-systems').style.display = 'block';
            //     document.getElementById('runtime-select-view').style.display = 'none';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name === 'apps') {
            //     document.getElementById('subitem-apps').style.color = '#1599ac';
            //     // document.getElementById('subitem-systems').style.color = 'red';
            //     document.getElementById('title').innerText = 'BTS - Applications'
            //     document.getElementById('overview-counts').style.display = 'none';
            //     document.getElementById('view').innerText = 'Applications';
            //     document.getElementById('view-apps').style.display = 'block';
            //     document.getElementById('runtime-select-view').style.display = 'none';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name === 'transfer') {
            //     document.getElementById('subitem-transfer').style.color = '#1599ac';
            //     document.getElementById('subitem-transfer').style.backgroundColor = '#1e1e1e';
            //     document.getElementById('title').innerText = 'BTS - Data'
            //     document.getElementById('overview-counts').style.display = 'none';
            //     document.getElementById('view').innerText = 'Data';
            //     document.getElementById('view-transfer').style.display = 'block';
            //     document.getElementById('runtime-select-view').style.display = 'none';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name.startsWith('test-setup')) {
            //     document.getElementById('title').innerText = 'BTS - Test Setup'
            //     document.getElementById('view').innerText = 'Test Setup';
            //     document.getElementById('view-test-setup').style.display = 'block';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name === 'battery-setup') {
            //     document.getElementById('title').innerText = 'BTS - Battery Setup'
            //     document.getElementById('view').innerText = 'Battery Setup';
            //     document.getElementById('view-battery-setup').style.display = 'block';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name === 'system-setup') {
            //     document.getElementById('title').innerText = 'BTS - System Setup'
            //     document.getElementById('view').innerText = 'System Setup';
            //     document.getElementById('view-system-setup').style.display = 'block';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     updateMenu(name);
            // } else if (name === 'system') {
            //     // document.getElementById('subitem-system').style.color = '#1599ac';
            //     // document.getElementById('subitem-system').style.backgroundColor = '#1e1e1e';
            //     // document.getElementById('title').innerText = 'BTS - System'
            //     // document.getElementById('view').innerText = 'System';
            //     // document.getElementById('view-setup').style.display = 'block';
            //     // // document.getElementById('chart-heatmap').style.display = 'none';
            //     // updateMenu(name);
            // } else if (name.startsWith('configuration')) {
            //     document.getElementById('subitem-configuration').style.color = '#1599ac';
            //     document.getElementById('subitem-configuration').style.backgroundColor = '#1e1e1e';
            //     document.getElementById('title').innerText = 'BTS - Setup'
            //     document.getElementById('view').innerText = 'Setup';
            //     document.getElementById('view-parameters').style.display = 'block';
            //     // document.getElementById('chart-heatmap').style.display = 'none';
            //     if (name.indexOf('-test') > 0) {
            //         changeConfigurationView('tests');
            //         if (name.indexOf('-test-') > 0) {
            //             const index = +(name.replace('configuration-test-', ''));
            //             viewTest(index);
            //         } else if (name.indexOf('-test') > 0) {
            //             const index = +(name.replace('configuration-test', ''));
            //             viewTest(7);
            //         }
            //     }
            //     if (name.indexOf('-battery') > 0) {
            //         changeConfigurationView('batteries');
            //         if (name.indexOf('-battery-') > 0) {
            //             const index = +(name.replace('configuration-battery-', ''));
            //             viewBattery(index);
            //         }
            //     }
            //     updateMenu(name);
            //     // if (name.indexOf('-battery') < 0 && name.indexOf('-test') < 0) {
            //     // }
            // }
            toggleSidebar(false);
        }

        function showView() {
            const hash = window.location.hash || '#runtime'
            if (hash) {
                if (hash.startsWith('#detail-')) {
                    // changeView('runtime', document.getElementById('runtime'));
                    // ['cards', 'overview-counts', 'view-batch', 'view-test-setup', 'view-battery-setup', 'view-system-setup'].forEach((v) => {
                    //     document.getElementById(v).style.display = 'none';
                    // })
                    clickCard(hash.replace('#detail-', ''));
                } else {
                    changeView(hash.substring(1), document.getElementById(hash.substring(1)));
                }
            }
        }

        function showModal() {
            document.getElementById('modal').style.display = 'block';
        }

        // function showRowMonikersOnDetailPage(toggle = true) {
        //     if (toggle) {
        //         show_row_monikers = !show_row_monikers;
        //         localStorage.setItem('show_row_monikers', show_row_monikers);
        //     }
        //     const elem = document.getElementById('option-show-row-monikers');
        //     elem.classList.remove('fa-toggle-on', 'fa-toggle-off', 'color-current', 'color-time');
        //     const classes = show_row_monikers === true ? ['fa-toggle-on', 'color-font'] : ['fa-toggle-off', 'color-time'];
        //     elem.classList.add(...classes);

        //     if (toggle) {
        //         window.location.reload();
        //     }
        // }

        // function showChargeDischargeOnTimeline(toggle = true) {
        //     if (toggle) {
        //         show_charge_discharge = !show_charge_discharge;
        //         localStorage.setItem('show_charge_discharge', show_charge_discharge);
        //     }
        //     const elem = document.getElementById('option_show_charge_discharge');
        //     elem.classList.remove('fa-toggle-on', 'fa-toggle-off', 'color-current', 'color-time');
        //     const classes = show_charge_discharge === true ? ['fa-toggle-on', 'color-font'] : ['fa-toggle-off', 'color-time'];
        //     elem.classList.add(...classes);

        //     if (toggle) {
        //         window.location.reload();
        //     }
        // }

        function toggleMenuLocation(toggle = true) {
            if (toggle) {
                menu_location_bottom = !menu_location_bottom;
                localStorage.setItem('menu_location_bottom', menu_location_bottom);
            }
            const elem = document.getElementById('option_menu_location');
            elem.classList.remove('fa-toggle-on', 'fa-toggle-off', 'color-current', 'color-time');
            const classes = menu_location_bottom === true ? ['fa-toggle-on', 'color-font'] : ['fa-toggle-off', 'color-time'];
            elem.classList.add(...classes);

            if (toggle) {
                window.location.reload();
            }
        }

        window.addEventListener("popstate", (event) => {
            showView();
        });

        function clickBack() {
            history.back();
        }

        // FILTER
        function filter(value) {
            console.warn(value);
        }

        // EXPAND SYSTEM SETUP TABLE
        function expandTable(name, elem) {
            document.getElementById(name).style.maxHeight = '';
            elem.style.display = 'none';
        }

        // TIMELINE TOOLTIP
        function timelineTooltip(e) {
            console.log(e);
        }

        // FILTER RUNTIME
        function filterRuntime(name) {
            isSelected = document.getElementById(`filter_${name}`).classList.contains('filter-selected');
            ['all', 'on_test', 'paused', 'empty', 'complete', 'error'].forEach((v) => {
                document.getElementById(`filter_${v}`).classList.remove('filter-selected');
            });
            if (isSelected === true) {
                cards.items.forEach((v) => {
                    document.getElementById(`filter_${name}`).classList.remove('filter-selected');
                    [''].forEach((v2) => {
                        const elem = document.getElementById(`${v2}${v.name}`).parentElement;
                        elem.classList.remove('w3-hide');
                    });
                    ['table-row-', 'timeline-row-', 'batch-row-'].forEach((v2) => {
                        const elem = document.getElementById(`${v2}${v.name}`);
                        elem.classList.remove('w3-hide');
                    });
                });
                filterRuntime('all');
            } else {
                document.getElementById(`filter_${name}`).classList.add('filter-selected');
                cards.items.forEach((v) => {
                    [''].forEach((v2) => {
                        const elem = document.getElementById(`${v2}${v.name}`).parentElement;
                        if (v.state !== name) {
                            if (name === 'all') {
                                elem.classList.remove('w3-hide');
                            } else {
                                if (name === 'on_test') {
                                    if (v.state !== name) {
                                        elem.classList.add('w3-hide');
                                    }
                                } else {
                                    elem.classList.add('w3-hide');
                                }
                            }
                        } else {
                            elem.classList.remove('w3-hide');
                        }
                    });
                    ['table-row-', 'timeline-row-', 'batch-row-'].forEach((v2) => {
                        const elem = document.getElementById(`${v2}${v.name}`);
                        if (v.state !== name) {
                            if (name === 'all') {
                                elem.classList.remove('w3-hide');
                            } else {
                                // if (v.state !== 'wait' || v.state !== 'rest' || v.state !== 'on_test') {
                                //     elem.classList.add('w3-hide');
                                // } else {
                                elem.classList.add('w3-hide');
                                // }
                            }
                        } else {
                            elem.classList.remove('w3-hide');
                            // elem.classList.add('w3-show');
                        }
                    });
                })
            }
            // const filtered = cards.items.filter((v) => v.state === name);
            // w3.displayObject("cards", cards);
            // w3.displayObject("cards", {items: filtered });

            // document.getElementById('content').style.display = 'block';
            // w3.displayObject("cards", cards);
            // selectCardType(card_type);
        }

        function toggleBathSelected(id) {
            const elem = document.getElementById(id);
            const isSelected = elem.classList.contains('fa-square-o');
            if (id.endsWith('-select-all')) {
                if (isSelected) {
                    cards.items.forEach((v) => {
                        const e = document.getElementById(`batch-row-${v.name}`);
                        if (e.classList.contains('w3-hide') === false) {
                            document.getElementById(`batch-row-${v.name}-selected`).classList.replace('fa-square-o', 'fa-check-square-o');
                        }
                    })
                } else {
                    cards.items.forEach((v) => {
                        document.getElementById(`batch-row-${v.name}-selected`).classList.replace('fa-check-square-o', 'fa-square-o');
                    })
                }
            }
            if (isSelected) {
                elem.classList.replace('fa-square-o', 'fa-check-square-o');
            } else {
                elem.classList.replace('fa-check-square-o', 'fa-square-o');
            }
        }

        //#region SETUP i/O ASSIGNMENT

        // SYSTEM SETUP CHANNEL ASSIGNMENT VIEW
        function changeChannelAssignmentView(view) {
            // const elemShared = document.getElementById('system-setup-channel-assignment-shared');
            const elemChannels = document.getElementById('system-setup-channel-assignment-channels');
            const elemLocations = document.getElementById('system-setup-channel-assignment-locations');

            // elemShared.classList.remove('card-menu-option-selected');
            elemChannels.classList.remove('card-menu-option-selected');
            elemLocations.classList.remove('card-menu-option-selected');

            // const elemSharedView = document.getElementById('channel-assignment-view-shared');
            const elemChannelsView = document.getElementById('channel-assignment-view-channels');
            const elemLocationsView = document.getElementById('channel-assignment-view-locations');

            // elemSharedView.style.display = 'none';
            elemChannelsView.style.display = 'none';
            elemLocationsView.style.display = 'none';


            // if (view === 'shared') {
            //     elemShared.classList.add('card-menu-option-selected');
            //     elemShared.style.borderBottom = '5px solid #75e0f0';
            //     elemLocations.style.borderBottom = '';
            //     elemChannels.style.borderBottom = '';
            //     // elemLocations.style.backgroundColor = '#2f2f2f';
            //     elemSharedView.style.display = 'block';
            // } else 
            if (view === 'channels') {
                elemChannels.classList.add('card-menu-option-selected');
                elemChannels.style.borderBottom = '5px solid #75e0f0';
                // elemShared.style.borderBottom = '';
                elemLocations.style.borderBottom = '';
                elemChannelsView.style.display = 'block';
            } else if (view === 'locations') {
                elemLocations.classList.add('card-menu-option-selected');
                elemLocations.style.borderBottom = '5px solid #75e0f0';
                // elemShared.style.borderBottom = '';
                elemChannels.style.borderBottom = '';
                elemLocationsView.style.display = 'block';
            }
        }
        //#endregion

        // function toggleSidebar() {
        //     const isOpen = document.getElementById('mySidebar').style.display === 'block';
        //     document.getElementById('mySidebar').style.display = isOpen ? 'none' : 'block';
        //     document.getElementById('main-page').style.paddingLeft = isOpen ? '' : '250px';
        //     // document.getElementById('content').style.width = '70%';
        //     // document.getElementById('cards').style.paddingLeft = isOpen ? '' : '330px';
        //     // document.getElementById('cards').style.width = '70%';
        // }

        function toggleSidebar(open = false) {
            document.getElementById('mySidebar').style.display = open ? 'block' : 'none';
            // document.getElementById('main-page').style.paddingLeft = open ? '250px' : '';
        }
        function toggleSubItems() {
            const elem = document.getElementById('subitems');
            const isExpanded = elem.style.flexDirection === 'column';

            if (isExpanded === false) {
                elem.style.flexDirection = 'column';
                document.getElementById('expand-caret').classList.replace('fa-caret-down', 'fa-caret-up');
                const lookup = {
                    'runtime': 'Runtime',
                    'batch': 'Batch Operations',
                    'configuration': 'Setup',
                    'system': 'System',
                    'help': 'Help'
                };
                [
                    'subitem-runtime',
                    'subitem-batch',
                    'subitem-configuration',
                    'subitem-system',
                    'subitem-help'
                ].forEach((v) => {
                    const e = document.getElementById(v);
                    e.style.textAlign = 'left';
                    let text = lookup[v.split('-')[1]];
                    e.innerHTML = e.innerHTML + '&nbsp;&nbsp;' + text;
                })
            } else {
                elem.style.flexDirection = '';
                document.getElementById('expand-caret').classList.replace('fa-caret-up', 'fa-caret-down');
                const lookup = {
                    'runtime': 'Runtime',
                    'batch': 'Batch Operations',
                    'configuration': 'Setup',
                    'system': 'System',
                    'help': 'Help'
                };
                [
                    'subitem-runtime',
                    'subitem-batch',
                    'subitem-configuration',
                    'subitem-system',
                    'subitem-help'
                ].forEach((v) => {
                    const e = document.getElementById(v);
                    e.style.textAlign = '';
                    let text = lookup[v.split('-')[1]];
                    e.innerHTML = e.innerHTML.replace(`&nbsp;&nbsp;${text}`, '');
                })
            }
        }

        function changeLanguage(name) {
            const elems = document.getElementsByClassName('translate')
            for (let e of elems) {
                e.innerText = translate(e.innerText, language, name);
            }
            language = name;
        }

        function toggleTestSelection() {
            function myFunction() {
                var x = document.getElementById("Demo");
                if (x.className.indexOf("w3-show") == -1) {
                    x.className += " w3-show";
                } else {
                    x.className = x.className.replace(" w3-show", "");
                }
            }
        }

        function signout() {
            localStorage.removeItem('key');
            window.location.href = './';
        }
    </script>

</body>

</html>