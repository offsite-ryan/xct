<!DOCTYPE html>
<html>
<title>BCT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="key.js"></script>"

<body>

    <div class="w3-container">
        <div id="id01" class="w3-modal" style="background-color:#2f2f2f;display:block;">
            <div class="w3-modal-content w3-card-4 w3-animate-zoom"
                style="max-width:400px;background-color:#4f4848;color:white;">

                <form id="myForm" class="w3-container" _onsubmit="submit()">
                    <div class="w3-section">
                        <label id="key"><b>Username</b></label>
                        <input id="user-input" class="w3-input w3-border w3-margin-bottom" type="text"
                            placeholder="Enter username" name="user" autocomplete="username" required>
                        <label id="key"><b>Key</b></label>
                        <input id="key-input" class="w3-input w3-border w3-margin-bottom" type="password"
                            placeholder="Enter Key" name="key" required>
                        <!-- <label><b>Page</b></label>
                        <input class="w3-input w3-border w3-margin-bottom" type="" placeholder="Enter Page" name="page"
                            required> -->
                        <button class="w3-button w3-block w3-section w3-padding"
                            style="background-color:#1599ac;color:white;" type="submit">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
    <script>
        // localStorage.removeItem('key');
        // localStorage.removeItem('user');
        document.getElementById("user-input").focus();
        document.getElementById("myForm").addEventListener("submit", function (e) {
            e.preventDefault();
            var formData = new FormData(e.target);
            const obj = Object.fromEntries(formData)
            console.log(obj);
            const isValidUser = obj.user === 'admin' || obj.user === 'engineer' || obj.user === 'operator';
            if (submit(obj) && isValidUser) {
                document.getElementById('myForm').style.backgroundColor = '#4f4848';
                localStorage.setItem('user', obj.user);
                localStorage.setItem('key', obj.key);
                window.location.href = `./`;
            } else {
                document.getElementById('myForm').style.backgroundColor = 'red';
            }
        });
    </script>

</body>

</html>